<body><h1>auth partnerships achq </h1><div data-reactroot="" id="__next"><div><aside></aside><div><div tabindex="-1"><main data-algolia="pageContent"><div><div><div><h1>Add ACHQ to your app</h1><h4>Use ACHQ with Plaid Auth to send and receive payments!</h4><div></div></div></div></div><div><img alt="Partnership ACHQ logo" height="" src="/_next/image?url=/assets/img/docs/plaid-achq-partnership.png&amp;w=1920&amp;q=75" width="624"/></div><br/><a href="/docs/auth/partnerships/achq/#overview"><h4>Overview<span data-algolia="linkedHeadingAnchor" id="overview"></span></h4></a><p>Plaid and ACHQ have partnered to offer fast and secure processing of ACH transactions via the web and mobile.
Use Plaid Link to instantly authenticate your customer's bank account and connect to the ACHQ API to manage payment submission, monitoring, and reconciliation all from a single endpoint. With Plaid + ACHQ companies can seamlessly onboard ACH customers, leverage same-day ACH processing for both credits and debits, and eliminate payment errors. All without your business ever touching any sensitive bank data.</p><a href="/docs/auth/partnerships/achq/#getting-started"><h4>Getting Started<span data-algolia="linkedHeadingAnchor" id="getting-started"></span></h4></a><p>You'll first want to familiarize yourself with <a href="/docs/link/">Plaid Link</a>, a drop-in client-side
integration for the Plaid API that handles input validation, error handling, and multi-factor
authentication. You will also need to have a
verified <a href="https://achq.com/plaid" rel="nofollow noopener noreferrer" target="_blank">ACHQ account</a> to
add a bank funding source.</p><p>Your customers will use Link to authenticate with their financial institution and select the
bank account they wish to use for payment transactions. From there, you'll receive a Plaid
<code>access_token</code> and a <!-- -->ACHQ<!-- --> <code>processor_token</code>, which allows you to quickly and securely
verify a bank funding source via <a href="http://plaid.achq.com" rel="nofollow noopener noreferrer" target="_blank">ACHQ's API</a> without having to store any sensitive banking information. Utilizing Plaid + <!-- -->ACHQ<!-- --> enables a seamless workflow for sending and receiving payments.</p><a href="/docs/auth/partnerships/achq/#instructions"><h4>Instructions<span data-algolia="linkedHeadingAnchor" id="instructions"></span></h4></a><a href="/docs/auth/partnerships/achq/#set-up-your-accounts"><h5>Set up your accounts<span data-algolia="linkedHeadingAnchor" id="set-up-your-accounts"></span></h5></a><p>You'll need accounts at both Plaid and <!-- -->ACHQ<!-- --> in order to use the
Plaid + <!-- -->ACHQ<!-- --> integration. You'll also need to enable your
Plaid account for the <!-- -->ACHQ<!-- --> integration.</p><p>First, you will need to work with the <!-- -->ACHQ<!-- --> team
to <a href="https://achq.com/plaid" rel="nofollow noopener noreferrer" target="_blank">sign up for a ACHQ account</a>, if you do not already have one. </p><p>Next, verify that your Plaid account is enabled for the integration. If you do not have a Plaid account,
<a href="https://dashboard.plaid.com/signup" rel="nofollow noopener noreferrer" target="_blank">create one</a>.</p><p>To enable your Plaid account for the integration, go to the <a href="https://dashboard.plaid.com/developers/integrations" rel="nofollow noopener noreferrer" target="_blank">Integrations</a>
section of the account dashboard. If the integration is off, simply click the 'Enable' button
for <!-- -->ACHQ<!-- --> to enable the integration.</p><p>Finally, you'll need to complete your Plaid <a href="https://dashboard.plaid.com/settings/company/app-branding" rel="nofollow noopener noreferrer" target="_blank">Application Profile</a> in the Dashboard, which involves filling out basic information about your app, such as your company name and website. This step helps your end-users learn more how your product uses their bank information and is also required for connecting to some banks.</p><a href="/docs/auth/partnerships/achq/#create-a-link_token"><h5>Create a link_token<span data-algolia="linkedHeadingAnchor" id="create-a-link_token"></span></h5></a><p>In order to integrate with Plaid Link, you will first need to create a <code>link_token</code>. A <code>link_token</code>
is a short-lived, one-time use token that is used to authenticate your app with Link. To create one,
make a <a href="/docs/api/tokens/#linktokencreate"><code>/link/token/create</code></a> request with your <code>client_id</code>, <code>secret</code>, and a few other
required parameters from your app server. For a full list of <code>link_token</code> configurations, see <a href="/docs/api/tokens/#linktokencreate"><code>/link/token/create</code></a>.</p><p>To see your <code>client_id</code> and <code>secret</code>, visit the <a href="https://dashboard.plaid.com/developers/keys" rel="nofollow noopener noreferrer" target="_blank">Plaid Dashboard</a>.</p><span id="content-switcher-unique-id-41">Select group for content switcher</span><div><div aria-labelledby="content-switcher-unique-id-41" role="radiogroup"><button aria-checked="true" role="radio" type="button"><span><span><i><svg aria-hidden="true" role="presentation" viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M0 0h24v24H0z" fill="none"></path><path d="M10.03 17.09l-4.56-4.56 1.06-1.06 3.44 3.44 7.47-8.41 1.12 1-8.53 9.59z" fill="currentColor"></path></svg></i></span><span>Current libraries</span></span></button><button aria-checked="false" role="radio" type="button"><span><span>Legacy libraries</span></span></button></div></div><div><div role="group"><div><label>server.js</label><div><div><div><div><button aria-controls="dropdown-unique-id-42" aria-expanded="false" aria-haspopup="true" aria-label="Select Language" type="button"><span>Node</span><i><svg aria-hidden="true" height="24" role="presentation" width="24" xmlns="http://www.w3.org/2000/svg"><g fill="none" fill-rule="evenodd"><path d="M0 0h24v24H0z"></path><path d="M12 14.06l-3.53-3.53 1.06-1.06L12 11.94l2.47-2.47 1.06 1.06z" fill="currentColor"></path></g></svg></i></button></div><div data-popper-escaped="true" data-popper-placement="top" data-popper-reference-hidden="true" role="tooltip"><span>Select Language</span></div></div><div id="dropdown-unique-id-42" role="menu"><ul><li><button aria-current="false" label="Curl" type="button" value="bash"><span><span>Curl</span></span></button></li><li><button aria-current="true" label="Node" type="button" value="node"><span><span>Node</span></span><i><svg aria-hidden="true" role="presentation" viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M0 0h24v24H0z" fill="none"></path><path d="M10.03 17.09l-4.56-4.56 1.06-1.06 3.44 3.44 7.47-8.41 1.12 1-8.53 9.59z" fill="currentColor"></path></svg></i></button></li><li><button aria-current="false" label="Python" type="button" value="python"><span><span>Python</span></span></button></li><li><button aria-current="false" label="Ruby" type="button" value="ruby"><span><span>Ruby</span></span></button></li><li><button aria-current="false" label="Java" type="button" value="java"><span><span>Java</span></span></button></li><li><button aria-current="false" label="Go" type="button" value="go"><span><span>Go</span></span></button></li></ul></div></div><button role="button" type="button"><span><span><span><i><svg aria-hidden="true" role="presentation" viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M0 0h24v24H0z" fill="none"></path><path d="M21.54 11.12l-5.66-5.66a1.24 1.24 0 00-1.76 0l-2.2 2.2-2-2a1.26 1.26 0 00-1.75 0l-5.5 5.5a1.21 1.21 0 000 1.75l5.5 5.5a1.21 1.21 0 001.75 0l2.05-2 2.2 2.2a1.23 1.23 0 001.76 0l5.66-5.66a1.24 1.24 0 00-.05-1.83zM9 17.13L3.87 12 9 6.87l1.85 1.85-2.39 2.4a1.24 1.24 0 000 1.76l2.39 2.4zm6 .17L9.7 12 15 6.7l5.3 5.3z" fill="currentColor"></path></svg></i><i><svg aria-hidden="true" role="presentation" viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M0 0h24v24H0z" fill="none"></path><path d="M10.03 17.09l-4.56-4.56 1.06-1.06 3.44 3.44 7.47-8.41 1.12 1-8.53 9.59z" fill="currentColor"></path></svg></i></span></span><span><span>Copy</span></span></span></button></div></div><div data-id="scroll-container" tabindex="-1"><div><pre><code><div><span>1</span><span>app</span><span>.</span><span>post</span><span>(</span><span>'/api/create_link_token'</span><span>,</span><span> </span><span>async</span><span> </span><span>function</span><span> </span><span>(</span><span>request</span><span>,</span><span> response</span><span>)</span><span> </span><span>{</span><span></span></div><div><span>2</span><span>  </span><span>// Get the client_user_id by searching for the current user</span><span></span></div><div><span>3</span><span>  </span><span>const</span><span> user </span><span>=</span><span> </span><span>await</span><span> </span><span>User</span><span>.</span><span>find</span><span>(</span><span>...</span><span>)</span><span>;</span><span></span></div><div><span>4</span><span>  </span><span>const</span><span> clientUserId </span><span>=</span><span> user</span><span>.</span><span>id</span><span>;</span><span></span></div><div><span>5</span><span>  </span><span>const</span><span> request </span><span>=</span><span> </span><span>{</span><span></span></div><div><span>6</span><span>    user</span><span>:</span><span> </span><span>{</span><span></span></div><div><span>7</span><span>      </span><span>// This should correspond to a unique id for the current user.</span><span></span></div><div><span>8</span><span>      client_user_id</span><span>:</span><span> clientUserId</span><span>,</span><span></span></div><div><span>9</span><span>    </span><span>}</span><span>,</span><span></span></div><div><span>10</span><span>    client_name</span><span>:</span><span> </span><span>'Plaid Test App'</span><span>,</span><span></span></div><div><span>11</span><span>    products</span><span>:</span><span> </span><span>[</span><span>'auth'</span><span>]</span><span>,</span><span></span></div><div><span>12</span><span>    language</span><span>:</span><span> </span><span>'en'</span><span>,</span><span></span></div><div><span>13</span><span>    webhook</span><span>:</span><span> </span><span>'https://webhook.example.com'</span><span>,</span><span></span></div><div><span>14</span><span>    redirect_uri</span><span>:</span><span> </span><span>'https://domainname.com/oauth-page.html'</span><span>,</span><span></span></div><div><span>15</span><span>    country_codes</span><span>:</span><span> </span><span>[</span><span>'US'</span><span>]</span><span>,</span><span></span></div><div><span>16</span><span>  </span><span>}</span><span>;</span><span></span></div><div><span>17</span><span>  </span><span>try</span><span> </span><span>{</span><span></span></div><div><span>18</span><span>    </span><span>const</span><span> createTokenResponse </span><span>=</span><span> </span><span>await</span><span> client</span><span>.</span><span>linkTokenCreate</span><span>(</span><span>request</span><span>)</span><span>;</span><span></span></div><div><span>19</span><span>    response</span><span>.</span><span>json</span><span>(</span><span>createTokenResponse</span><span>.</span><span>data</span><span>)</span><span>;</span><span></span></div><div><span>20</span><span>  </span><span>}</span><span> </span><span>catch</span><span> </span><span>(</span><span>error</span><span>)</span><span> </span><span>{</span><span></span></div><div><span>21</span><span>    </span><span>// handle error</span><span></span></div><div><span>22</span><span>  </span><span>}</span><span></span></div><div><span>23</span><span></span><span>}</span><span>)</span><span>;</span></div></code></pre></div></div></div></div><a href="/docs/auth/partnerships/achq/#integrate-with-plaid-link"><h5>Integrate with Plaid Link<span data-algolia="linkedHeadingAnchor" id="integrate-with-plaid-link"></span></h5></a><p>Once you have a <code>link_token</code>, all it takes is a few lines of client-side JavaScript to launch
Link. Then, in the <code>onSuccess</code> callback, you can call a simple server-side handler to exchange
the Link <code>public_token</code> for a Plaid <code>access_token</code> and a <!-- -->ACHQ<!-- --> <code>processor_token</code>.</p><div role="group"><div><label>Integrate Link</label><div><button role="button" type="button"><span><span><span><i><svg aria-hidden="true" role="presentation" viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M0 0h24v24H0z" fill="none"></path><path d="M21.54 11.12l-5.66-5.66a1.24 1.24 0 00-1.76 0l-2.2 2.2-2-2a1.26 1.26 0 00-1.75 0l-5.5 5.5a1.21 1.21 0 000 1.75l5.5 5.5a1.21 1.21 0 001.75 0l2.05-2 2.2 2.2a1.23 1.23 0 001.76 0l5.66-5.66a1.24 1.24 0 00-.05-1.83zM9 17.13L3.87 12 9 6.87l1.85 1.85-2.39 2.4a1.24 1.24 0 000 1.76l2.39 2.4zm6 .17L9.7 12 15 6.7l5.3 5.3z" fill="currentColor"></path></svg></i><i><svg aria-hidden="true" role="presentation" viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M0 0h24v24H0z" fill="none"></path><path d="M10.03 17.09l-4.56-4.56 1.06-1.06 3.44 3.44 7.47-8.41 1.12 1-8.53 9.59z" fill="currentColor"></path></svg></i></span></span><span><span>Copy</span></span></span></button></div></div><div data-id="scroll-container" tabindex="0"><div><pre><code><div><span>1</span><span>&lt;</span><span>button id</span><span>=</span><span>"linkButton"</span><span>&gt;</span><span>Open</span><span> </span><span>Link</span><span> </span><span>-</span><span> </span><span>Institution</span><span> </span><span>Select</span><span>&lt;</span><span>/</span><span>button</span><span>&gt;</span><span></span></div><div><span>2</span><span></span><span>&lt;</span><span>script src</span><span>=</span><span>"https://cdn.plaid.com/link/v2/stable/link-initialize.js"</span><span>&gt;</span><span>&lt;</span><span>/</span><span>script</span><span>&gt;</span><span></span></div><div><span>3</span><span></span><span>&lt;</span><span>script</span><span>&gt;</span><span></span></div><div><span>4</span><span>  </span><span>(</span><span>async</span><span> </span><span>function</span><span>(</span><span>)</span><span>{</span><span></span></div><div><span>5</span><span>    </span><span>var</span><span> linkHandler </span><span>=</span><span> </span><span>Plaid</span><span>.</span><span>create</span><span>(</span><span>{</span><span></span></div><div><span>6</span><span>      </span><span>// Make a request to your server to fetch a new link_token.</span><span></span></div><div><span>7</span><span>      token</span><span>:</span><span> </span><span>(</span><span>await</span><span> $</span><span>.</span><span>post</span><span>(</span><span>'/create_link_token'</span><span>)</span><span>)</span><span>.</span><span>link_token</span><span>,</span><span></span></div><div><span>8</span><span>      </span><span>onSuccess</span><span>:</span><span> </span><span>function</span><span>(</span><span>public_token</span><span>,</span><span> metadata</span><span>)</span><span> </span><span>{</span><span></span></div><div><span>9</span><span>        </span><span>// The onSuccess function is called when the user has successfully</span><span></span></div><div><span>10</span><span>        </span><span>// authenticated and selected an account to use.</span><span></span></div><div><span>11</span><span>        </span><span>//</span><span></span></div><div><span>12</span><span>        </span><span>// When called, you will send the public_token and the selected accounts,</span><span></span></div><div><span>13</span><span>        </span><span>// metadata.accounts, to your backend app server.</span><span></span></div><div><span>14</span><span>        </span><span>sendDataToBackendServer</span><span>(</span><span>{</span><span></span></div><div><span>15</span><span>           public_token</span><span>:</span><span> public_token</span><span>,</span><span></span></div><div><span>16</span><span>           accounts</span><span>:</span><span> metadata</span><span>.</span><span>accounts</span><span></span></div><div><span>17</span><span>        </span><span>}</span><span>)</span><span>;</span><span></span></div><div><span>18</span><span>      </span><span>}</span><span>,</span><span></span></div><div><span>19</span><span>      </span><span>onExit</span><span>:</span><span> </span><span>function</span><span>(</span><span>err</span><span>,</span><span> metadata</span><span>)</span><span> </span><span>{</span><span></span></div><div><span>20</span><span>        </span><span>// The user exited the Link flow.</span><span></span></div><div><span>21</span><span>        </span><span>if</span><span> </span><span>(</span><span>err </span><span>!=</span><span> </span><span>null</span><span>)</span><span> </span><span>{</span><span></span></div><div><span>22</span><span>            </span><span>// The user encountered a Plaid API error prior to exiting.</span><span></span></div><div><span>23</span><span>        </span><span>}</span><span></span></div><div><span>24</span><span>        </span><span>// metadata contains information about the institution</span><span></span></div><div><span>25</span><span>        </span><span>// that the user selected and the most recent API request IDs.</span><span></span></div><div><span>26</span><span>        </span><span>// Storing this information can be helpful for support.</span><span></span></div><div><span>27</span><span>      </span><span>}</span><span>,</span><span></span></div><div><span>28</span><span>    </span><span>}</span><span>)</span><span>;</span><span></span></div><div><span>29</span><span>  </span><span>}</span><span>)</span><span>(</span><span>)</span><span>;</span><span></span></div><div><span>30</span><span></span></div><div><span>31</span><span>  </span><span>// Trigger the authentication view</span><span></span></div><div><span>32</span><span>  </span><span>document</span><span>.</span><span>getElementById</span><span>(</span><span>'linkButton'</span><span>)</span><span>.</span><span>onclick</span><span> </span><span>=</span><span> </span><span>function</span><span>(</span><span>)</span><span> </span><span>{</span><span></span></div><div><span>33</span><span>    </span><span>// Link will automatically detect the institution ID</span><span></span></div><div><span>34</span><span>    </span><span>// associated with the public token and present the</span><span></span></div><div><span>35</span><span>    </span><span>// credential view to your user.</span><span></span></div><div><span>36</span><span>    linkHandler</span><span>.</span><span>open</span><span>(</span><span>)</span><span>;</span><span></span></div><div><span>37</span><span>  </span><span>}</span><span>;</span><span></span></div><div><span>38</span><span></span><span>&lt;</span><span>/</span><span>script</span><span>&gt;</span></div></code></pre></div></div></div><p>See the <a href="/docs/link/web/#create">Link parameter reference</a> for complete documentation on possible configurations.</p><p><code>Plaid.create</code> accepts one argument, a configuration <code>Object</code>, and returns an <code>Object</code> with three functions, <a href="/docs/link/web/#open"><code>open</code></a>, <a href="/docs/link/web/#exit"><code>exit</code></a>, and <a href="/docs/link/web/#destroy"><code>destroy</code></a>. Calling <code>open</code> will display the "Institution Select" view, calling <code>exit</code> will close Link, and calling <code>destroy</code> will clean up the iframe.</p><a href="/docs/auth/partnerships/achq/#write-server-side-handler"><h5>Write server-side handler<span data-algolia="linkedHeadingAnchor" id="write-server-side-handler"></span></h5></a><p>The Link module handles the entire onboarding flow securely and quickly, but does not actually retrieve account
data for a user. Instead, the Link module returns a <code>public_token</code> and an <code>accounts</code> array, which is a property
on the <code>metadata</code> object, via the <code>onSuccess</code> callback. Exchange this <code>public_token</code> for a Plaid <code>access_token</code>
using the <a href="/docs/api/tokens/#itempublic_tokenexchange"><code>/item/public_token/exchange</code></a> API endpoint.</p><p>The <code>accounts</code> array will contain information about bank accounts associated with the credentials entered by the
user, and may contain multiple accounts if the user has more than one bank account at the institution. If you
want the user to specify only a single account to link so you know which account to use with <!-- -->ACHQ<!-- -->,
set <a href="https://dashboard.plaid.com/link/account-select" rel="nofollow noopener noreferrer" target="_blank">Account Select</a> to "enabled for one account" in the Plaid
Developer Dashboard. When this setting is selected, the <code>accounts</code> array will always contain exactly one account.</p><p>Once you have identified the account you will use, you will send the <code>access_token</code> and <code>account_id</code> property of the account to Plaid via the <a href="/docs/api/processors/#processortokencreate"><code>/processor/token/create</code></a> endpoint in order to create a <!-- -->ACHQ<!-- --> <code>processor_token</code>. You'll send this token
to <!-- -->ACHQ<!-- --> and they will use it to securely retrieve account and routing numbers from Plaid.</p><p>You can create <!-- -->ACHQ<!-- --> <code>processor_tokens</code> in all three API environments:</p><ul><li>Sandbox (<a href="https://sandbox.plaid.com" rel="nofollow noopener noreferrer" target="_blank">https://sandbox.plaid.com</a>): test simulated users</li><li>Development (<a href="https://development.plaid.com" rel="nofollow noopener noreferrer" target="_blank">https://development.plaid.com</a>): test live users</li><li>Production (<a href="https://production.plaid.com" rel="nofollow noopener noreferrer" target="_blank">https://production.plaid.com</a>): production environment for when you're ready to go live and
have valid <!-- -->ACHQ<!-- --> Production credentials</li></ul><span id="content-switcher-unique-id-43">Select group for content switcher</span><div><div aria-labelledby="content-switcher-unique-id-43" role="radiogroup"><button aria-checked="true" role="radio" type="button"><span><span><i><svg aria-hidden="true" role="presentation" viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M0 0h24v24H0z" fill="none"></path><path d="M10.03 17.09l-4.56-4.56 1.06-1.06 3.44 3.44 7.47-8.41 1.12 1-8.53 9.59z" fill="currentColor"></path></svg></i></span><span>Current libraries</span></span></button><button aria-checked="false" role="radio" type="button"><span><span>Legacy libraries</span></span></button></div></div><div><div role="group"><div><label>Processor token create request</label><div><div><div><div><button aria-controls="dropdown-unique-id-44" aria-expanded="false" aria-haspopup="true" aria-label="Select Language" type="button"><span>Node</span><i><svg aria-hidden="true" height="24" role="presentation" width="24" xmlns="http://www.w3.org/2000/svg"><g fill="none" fill-rule="evenodd"><path d="M0 0h24v24H0z"></path><path d="M12 14.06l-3.53-3.53 1.06-1.06L12 11.94l2.47-2.47 1.06 1.06z" fill="currentColor"></path></g></svg></i></button></div><div data-popper-escaped="true" data-popper-placement="top" data-popper-reference-hidden="true" role="tooltip"><span>Select Language</span></div></div><div id="dropdown-unique-id-44" role="menu"><ul><li><button aria-current="false" label="Curl" type="button" value="bash"><span><span>Curl</span></span></button></li><li><button aria-current="true" label="Node" type="button" value="node"><span><span>Node</span></span><i><svg aria-hidden="true" role="presentation" viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M0 0h24v24H0z" fill="none"></path><path d="M10.03 17.09l-4.56-4.56 1.06-1.06 3.44 3.44 7.47-8.41 1.12 1-8.53 9.59z" fill="currentColor"></path></svg></i></button></li><li><button aria-current="false" label="Python" type="button" value="python"><span><span>Python</span></span></button></li><li><button aria-current="false" label="Ruby" type="button" value="ruby"><span><span>Ruby</span></span></button></li><li><button aria-current="false" label="Java" type="button" value="java"><span><span>Java</span></span></button></li><li><button aria-current="false" label="Go" type="button" value="go"><span><span>Go</span></span></button></li></ul></div></div><button role="button" type="button"><span><span><span><i><svg aria-hidden="true" role="presentation" viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M0 0h24v24H0z" fill="none"></path><path d="M21.54 11.12l-5.66-5.66a1.24 1.24 0 00-1.76 0l-2.2 2.2-2-2a1.26 1.26 0 00-1.75 0l-5.5 5.5a1.21 1.21 0 000 1.75l5.5 5.5a1.21 1.21 0 001.75 0l2.05-2 2.2 2.2a1.23 1.23 0 001.76 0l5.66-5.66a1.24 1.24 0 00-.05-1.83zM9 17.13L3.87 12 9 6.87l1.85 1.85-2.39 2.4a1.24 1.24 0 000 1.76l2.39 2.4zm6 .17L9.7 12 15 6.7l5.3 5.3z" fill="currentColor"></path></svg></i><i><svg aria-hidden="true" role="presentation" viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M0 0h24v24H0z" fill="none"></path><path d="M10.03 17.09l-4.56-4.56 1.06-1.06 3.44 3.44 7.47-8.41 1.12 1-8.53 9.59z" fill="currentColor"></path></svg></i></span></span><span><span>Copy</span></span></span></button></div></div><div data-id="scroll-container" tabindex="0"><div><pre><code><div><span>1</span><span>const</span><span> </span><span>{</span><span> </span><span>Configuration</span><span>,</span><span> </span><span>PlaidApi</span><span>,</span><span> </span><span>PlaidEnvironments</span><span>,</span><span> </span><span>ProcessorTokenCreateRequest</span><span> </span><span>}</span><span> </span><span>=</span><span> </span><span>require</span><span>(</span><span>'plaid'</span><span>)</span><span>;</span><span></span></div><div><span>2</span><span></span></div><div><span>3</span><span></span><span>// Change sandbox to development to test with live users;</span><span></span></div><div><span>4</span><span></span><span>// Change to production when you're ready to go live!</span><span></span></div><div><span>5</span><span></span><span>const</span><span> configuration </span><span>=</span><span> </span><span>new</span><span> </span><span>Configuration</span><span>(</span><span>{</span><span></span></div><div><span>6</span><span>  basePath</span><span>:</span><span> </span><span>PlaidEnvironments</span><span>[</span><span>process</span><span>.</span><span>env</span><span>.</span><span>PLAID_ENV</span><span>]</span><span>,</span><span></span></div><div><span>7</span><span>  baseOptions</span><span>:</span><span> </span><span>{</span><span></span></div><div><span>8</span><span>    headers</span><span>:</span><span> </span><span>{</span><span></span></div><div><span>9</span><span>      </span><span>'PLAID-CLIENT-ID'</span><span>:</span><span> process</span><span>.</span><span>env</span><span>.</span><span>PLAID_CLIENT_ID</span><span>,</span><span></span></div><div><span>10</span><span>      </span><span>'PLAID-SECRET'</span><span>:</span><span> process</span><span>.</span><span>env</span><span>.</span><span>PLAID_SECRET</span><span>,</span><span></span></div><div><span>11</span><span>      </span><span>'Plaid-Version'</span><span>:</span><span> </span><span>'2020-09-14'</span><span>,</span><span></span></div><div><span>12</span><span>    </span><span>}</span><span>,</span><span></span></div><div><span>13</span><span>  </span><span>}</span><span>,</span><span></span></div><div><span>14</span><span></span><span>}</span><span>)</span><span>;</span><span></span></div><div><span>15</span><span></span></div><div><span>16</span><span></span><span>const</span><span> plaidClient </span><span>=</span><span> </span><span>new</span><span> </span><span>PlaidApi</span><span>(</span><span>configuration</span><span>)</span><span>;</span><span></span></div><div><span>17</span><span></span></div><div><span>18</span><span></span><span>try</span><span> </span><span>{</span><span></span></div><div><span>19</span><span>  </span><span>// Exchange the public_token from Plaid Link for an access token.</span><span></span></div><div><span>20</span><span>  </span><span>const</span><span> tokenResponse </span><span>=</span><span> </span><span>await</span><span> plaidClient</span><span>.</span><span>itemPublicTokenExchange</span><span>(</span><span>{</span><span></span></div><div><span>21</span><span>    public_token</span><span>:</span><span> publicToken</span><span>,</span><span></span></div><div><span>22</span><span>  </span><span>}</span><span>)</span><span>;</span><span></span></div><div><span>23</span><span>  </span><span>const</span><span> accessToken </span><span>=</span><span> tokenResponse</span><span>.</span><span>data</span><span>.</span><span>access_token</span><span>;</span><span></span></div><div><span>24</span><span></span></div><div><span>25</span><span>  </span><span>// Create a processor token for a specific account id.</span><span></span></div><div><span>26</span><span>  </span><span>const</span><span> request</span><span>:</span><span> </span><span>ProcessorTokenCreateRequest</span><span> </span><span>=</span><span> </span><span>{</span><span></span></div><div><span>27</span><span>    access_token</span><span>:</span><span> accessToken</span><span>,</span><span></span></div><div><span>28</span><span>    account_id</span><span>:</span><span> accountID</span><span>,</span><span></span></div><div><span>29</span><span>    processor</span><span>:</span><span> </span><span>'achq'</span><span>,</span><span></span></div><div><span>30</span><span>  </span><span>}</span><span>;</span><span></span></div><div><span>31</span><span>  </span><span>const</span><span> processorTokenResponse </span><span>=</span><span> </span><span>await</span><span> plaidClient</span><span>.</span><span>processorTokenCreate</span><span>(</span><span></span></div><div><span>32</span><span>    request</span><span>,</span><span></span></div><div><span>33</span><span>  </span><span>)</span><span>;</span><span></span></div><div><span>34</span><span>  </span><span>const</span><span> processorToken </span><span>=</span><span> processorTokenResponse</span><span>.</span><span>data</span><span>.</span><span>processor_token</span><span>;</span><span></span></div><div><span>35</span><span></span><span>}</span><span> </span><span>catch</span><span> </span><span>(</span><span>error</span><span>)</span><span> </span><span>{</span><span></span></div><div><span>36</span><span>  </span><span>// handle error</span><span></span></div><div><span>37</span><span></span><span>}</span></div></code></pre></div></div></div></div><p>For a valid request, the API will return a JSON response similar to:</p><div role="group"><div><label>Processor token create response</label><div><button role="button" type="button"><span><span><span><i><svg aria-hidden="true" role="presentation" viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M0 0h24v24H0z" fill="none"></path><path d="M21.54 11.12l-5.66-5.66a1.24 1.24 0 00-1.76 0l-2.2 2.2-2-2a1.26 1.26 0 00-1.75 0l-5.5 5.5a1.21 1.21 0 000 1.75l5.5 5.5a1.21 1.21 0 001.75 0l2.05-2 2.2 2.2a1.23 1.23 0 001.76 0l5.66-5.66a1.24 1.24 0 00-.05-1.83zM9 17.13L3.87 12 9 6.87l1.85 1.85-2.39 2.4a1.24 1.24 0 000 1.76l2.39 2.4zm6 .17L9.7 12 15 6.7l5.3 5.3z" fill="currentColor"></path></svg></i><i><svg aria-hidden="true" role="presentation" viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M0 0h24v24H0z" fill="none"></path><path d="M10.03 17.09l-4.56-4.56 1.06-1.06 3.44 3.44 7.47-8.41 1.12 1-8.53 9.59z" fill="currentColor"></path></svg></i></span></span><span><span>Copy</span></span></span></button></div></div><div data-id="scroll-container" tabindex="-1"><div><pre><code><div><span>1</span><span>{</span><span></span></div><div><span>2</span><span>  </span><span>"processor_token"</span><span>:</span><span> </span><span>"processor-sandbox-0asd1-a92nc"</span><span>,</span><span></span></div><div><span>3</span><span>  </span><span>"request_id"</span><span>:</span><span> </span><span>"m8MDnv9okwxFNBV"</span><span></span></div><div><span>4</span><span></span><span>}</span></div></code></pre></div></div></div><p>For possible error codes, see the full listing of Plaid <a href="/docs/errors/">error codes</a>.</p><a href="/docs/auth/partnerships/achq/#example-code-in-plaid-pattern"><h4>Example code in Plaid Pattern<span data-algolia="linkedHeadingAnchor" id="example-code-in-plaid-pattern"></span></h4></a><p>For a real-life example of an app that incorporates the creation of processor tokens, see the Node-based <a href="https://github.com/plaid/pattern-account-funding" rel="nofollow noopener noreferrer" target="_blank">Plaid Pattern Account Funding</a> sample app. Pattern Account Funding is a sample account funding app that creates a processor token to send to your payment partner. The processor token creation code can be found in <a href="https://github.com/plaid/pattern-account-funding/blob/master/server/routes/items.js#L126-L135" rel="nofollow noopener noreferrer" target="_blank">items.js</a></p><a href="/docs/auth/partnerships/achq/#launching-to-production"><h4>Launching to Production<span data-algolia="linkedHeadingAnchor" id="launching-to-production"></span></h4></a><a href="/docs/auth/partnerships/achq/#test-with-sandbox-credentials"><h5>Test with Sandbox credentials<span data-algolia="linkedHeadingAnchor" id="test-with-sandbox-credentials"></span></h5></a><p>To test the integration in Sandbox mode, simply use the Plaid <a href="/docs/sandbox/test-credentials/">Sandbox credentials</a>
along when launching Link with a <code>link_token</code> created in the Sandbox environment.</p><div><i><svg aria-hidden="true" role="presentation" viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M0 0h24v24H0z" fill="none"></path><path d="M12.75 16h-1.5v-5h1.5zM12 8a1 1 0 101 1 1 1 0 00-1-1zm8.75 4A8.75 8.75 0 1012 20.75 8.77 8.77 0 0020.75 12zm-1.5 0A7.25 7.25 0 1112 4.75 7.26 7.26 0 0119.25 12z" fill="currentColor"></path></svg></i><div><p>When testing in the Sandbox, you have the option to use the <a href="/docs/api/sandbox/#sandboxpublic_tokencreate"><code>/sandbox/public_token/create</code></a> endpoint instead of the end-to-end Link flow to create a <code>public_token</code>.  When using the <a href="/docs/api/sandbox/#sandboxpublic_tokencreate"><code>/sandbox/public_token/create</code></a>-based flow, the Account Select flow will be bypassed and the <code>accounts</code> array will not be populated. On Sandbox, instead of using the <code>accounts</code> array, you can call <a href="/docs/api/accounts/#accountsget"><code>/accounts/get</code></a> and test with any returned account ID associated with an account with the subtype <code>checking</code> or <code>savings</code>.</p></div></div><a href="/docs/auth/partnerships/achq/#get-ready-for-production"><h5>Get ready for production<span data-algolia="linkedHeadingAnchor" id="get-ready-for-production"></span></h5></a><p>Your account is immediately enabled for our Sandbox environment (<a href="https://sandbox.plaid.com" rel="nofollow noopener noreferrer" target="_blank">https://sandbox.plaid.com</a>).
To move to Production, please request access from the <a href="https://dashboard.plaid.com/developers/keys" rel="nofollow noopener noreferrer" target="_blank">Dashboard</a>.
You will need <!-- -->ACHQ<!-- --> Production credentials prior to initiating live payment
transactions in the <!-- -->ACHQ<!-- --> API with Plaid.</p><a href="/docs/auth/partnerships/achq/#support-and-questions"><h5>Support and questions<span data-algolia="linkedHeadingAnchor" id="support-and-questions"></span></h5></a><p>Find answers to many common integration questions and concernsâ€”such as pricing, sandbox and test mode usage,
and more, in our <a href="/docs/">docs</a>.</p><p>If you're still stuck, open a <a href="https://dashboard.plaid.com/support/new" rel="nofollow noopener noreferrer" target="_blank">support ticket</a> with information
describing the issue that you're experiencing and we'll get back to you as soon as we can.</p></main></div></div></div></div><next-route-announcer><p aria-live="assertive" id="__next-route-announcer__" role="alert"></p></next-route-announcer><div id="batBeacon340620491571"><img alt="" height="0" id="batBeacon754554154007" src="https://bat.bing.com/action/0?ti=25047304&amp;Ver=2&amp;mid=423059bb-290d-477b-be09-ab89eb916630&amp;sid=839d8000406811ee9647031f9910d79d&amp;vid=839d8d20406811ee8b5bc59b5329b4ac&amp;vids=0&amp;msclkid=N&amp;pi=0&amp;lg=en-US&amp;sw=5120&amp;sh=1440&amp;sc=24&amp;nwd=1&amp;tl=Auth%20-%20ACHQ%20%7C%20Plaid%20Docs&amp;p=https%3A%2F%2Fplaid.com%2Fdocs%2Fauth%2Fpartnerships%2Fachq%2F&amp;r=&amp;lt=745&amp;evt=pageLoad&amp;sv=1&amp;rn=4547" width="0"/><img alt="" height="0" id="batBeacon297090017021" src="https://bat.bing.com/action/0?ti=25047304&amp;Ver=2&amp;mid=423059bb-290d-477b-be09-ab89eb916630&amp;sid=839d8000406811ee9647031f9910d79d&amp;vid=839d8d20406811ee8b5bc59b5329b4ac&amp;vids=0&amp;msclkid=N&amp;ea=track&amp;el=DOCS_EVENT&amp;p=https%3A%2F%2Fplaid.com%2Fdocs%2Fauth%2Fpartnerships%2Fachq%2F&amp;sw=5120&amp;sh=1440&amp;sc=24&amp;nwd=1&amp;evt=custom&amp;rn=886109" width="0"/></div><div>
</div><img height="1" src="https://t.co/i/adsct?bci=3&amp;eci=2&amp;event_id=28378c16-4973-45f8-8626-50f9c0c62cbf&amp;events=%5B%5B%22pageview%22%2C%7B%7D%5D%5D&amp;integration=advertiser&amp;p_id=Twitter&amp;p_user_id=0&amp;pl_id=505f3866-45d1-4e5e-9747-a78de7024887&amp;tw_document_href=https%3A%2F%2Fplaid.com%2Fdocs%2Fauth%2Fpartnerships%2Fachq%2F&amp;tw_iframe_status=0&amp;tw_order_quantity=0&amp;tw_sale_amount=0&amp;txn_id=o5pi2&amp;type=javascript&amp;version=2.3.29" width="1"/><img height="1" src="https://analytics.twitter.com/i/adsct?bci=3&amp;eci=2&amp;event_id=28378c16-4973-45f8-8626-50f9c0c62cbf&amp;events=%5B%5B%22pageview%22%2C%7B%7D%5D%5D&amp;integration=advertiser&amp;p_id=Twitter&amp;p_user_id=0&amp;pl_id=505f3866-45d1-4e5e-9747-a78de7024887&amp;tw_document_href=https%3A%2F%2Fplaid.com%2Fdocs%2Fauth%2Fpartnerships%2Fachq%2F&amp;tw_iframe_status=0&amp;tw_order_quantity=0&amp;tw_sale_amount=0&amp;txn_id=o5pi2&amp;type=javascript&amp;version=2.3.29" width="1"/><iframe height="0" id="universal_pixel_u0iai2i" src="https://insight.adsrvr.org/track/up?adv=4azo4ri&amp;ref=https%3A%2F%2Fplaid.com%2Fdocs%2Fauth%2Fpartnerships%2Fachq%2F&amp;upid=u0iai2i&amp;upv=1.1.0" title="TTD Universal Pixel" width="0"></iframe><img height="1" src="https://t.co/i/adsct?bci=3&amp;eci=2&amp;event_id=06b70e45-8668-4070-be19-e01bf4f6227f&amp;events=%5B%5B%22pageview%22%2C%7B%7D%5D%5D&amp;integration=advertiser&amp;p_id=Twitter&amp;p_user_id=0&amp;pl_id=505f3866-45d1-4e5e-9747-a78de7024887&amp;tw_document_href=https%3A%2F%2Fplaid.com%2Fdocs%2Fauth%2Fpartnerships%2Fachq%2F&amp;tw_iframe_status=0&amp;tw_order_quantity=0&amp;tw_sale_amount=0&amp;txn_id=o5pi2&amp;type=javascript&amp;version=2.3.29" width="1"/><img height="1" src="https://analytics.twitter.com/i/adsct?bci=3&amp;eci=2&amp;event_id=06b70e45-8668-4070-be19-e01bf4f6227f&amp;events=%5B%5B%22pageview%22%2C%7B%7D%5D%5D&amp;integration=advertiser&amp;p_id=Twitter&amp;p_user_id=0&amp;pl_id=505f3866-45d1-4e5e-9747-a78de7024887&amp;tw_document_href=https%3A%2F%2Fplaid.com%2Fdocs%2Fauth%2Fpartnerships%2Fachq%2F&amp;tw_iframe_status=0&amp;tw_order_quantity=0&amp;tw_sale_amount=0&amp;txn_id=o5pi2&amp;type=javascript&amp;version=2.3.29" width="1"/></body>