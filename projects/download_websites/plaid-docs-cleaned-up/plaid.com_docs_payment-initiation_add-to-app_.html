<body><h1>payment initiation add to app </h1><div data-reactroot="" id="__next"><div><aside></aside><div><div tabindex="-1"><main data-algolia="pageContent"><div><div><div><h1>Add Payment Initiation to your app</h1><h4>Learn how to use Payment Initiation for account funding in your application</h4><div></div></div></div></div><p>In this guide, we start from scratch and walk through how to set up a <a href="/docs/api/products/payment-initiation/">Payment Initiation</a> flow for account funding.</p><a href="/docs/payment-initiation/add-to-app/#payment-initiation-flow-overview"><h4>Payment Initiation flow overview<span data-algolia="linkedHeadingAnchor" id="payment-initiation-flow-overview"></span></h4></a><div><div><span><b>The Plaid flow</b> begins when your user wants to initiate a payment to fund their account.</span></div><div><div><img alt="Step  diagram" height="" src="/_next/image?url=/assets/img/docs/payment_initiation/PIS-overview-row-0.png&amp;w=1920&amp;q=75" width=""/></div></div></div><div><div><span><b>1</b></span><span>Your backend sets up the payment and creates a<!-- --> <a href="/docs/api/products/payment-initiation/"><code>payment_initiation</code> </a><a href="/docs/api/tokens/#create-link-token"><code>link_token</code> </a>by interfacing with Plaid endpoints. It then passes the temporary token to your client app.</span></div><div><div><img alt="Step 1 diagram" height="" src="/_next/image?url=/assets/img/docs/payment_initiation/PIS-overview-row-1.png&amp;w=1920&amp;q=75" width=""/></div></div></div><div><div><span><b>2</b></span><span>Your client app uses the <code>link_token</code> to initiate a Link flow for your user. The<!-- --> <a href="/docs/link/web/#onsuccess"><code>onSuccess</code> callback</a> <!-- -->signals that the payment has been initiated.</span></div><div><div><img alt="Step 2 diagram" height="" src="/_next/image?url=/assets/img/docs/payment_initiation/PIS-overview-row-2.png&amp;w=1920&amp;q=75" width=""/></div></div></div><div><div><span><b>3</b></span><span>Your backend listens for<!-- --> <a href="/docs/api/products/payment-initiation#Webhooks"><code>PAYMENT_STATUS_UPDATE</code></a> <!-- -->webhooks to keep track of the payment's status.</span></div><div><div><img alt="Step 3 diagram" height="" src="/_next/image?url=/assets/img/docs/payment_initiation/PIS-overview-row-3.png&amp;w=1920&amp;q=75" width=""/></div></div></div><div></div><p>For a high-level overview of all our payment related offerings, see the <a href="/docs/payment-initiation/">Introduction to Payment Initiation</a>.</p><a href="/docs/payment-initiation/add-to-app/#get-plaid-api-keys-and-complete-application-and-company-profile"><h4>Get Plaid API keys and complete application and company profile<span data-algolia="linkedHeadingAnchor" id="get-plaid-api-keys-and-complete-application-and-company-profile"></span></h4></a><p>If you don't already have one, you'll need to <a href="https://dashboard.plaid.com/signup" rel="nofollow noopener noreferrer" target="_blank">create a Plaid developer account</a>. After creating your account, you can find your <a href="https://dashboard.plaid.com/developers/keys" rel="nofollow noopener noreferrer" target="_blank">API keys</a> under the Team Settings menu on the Plaid Dashboard.</p><p>You will also need to complete your <a href="https://dashboard.plaid.com/settings/company/app-branding" rel="nofollow noopener noreferrer" target="_blank">application profile</a> and <a href="https://dashboard.plaid.com/settings/company/profile" rel="nofollow noopener noreferrer" target="_blank">company profile</a> on the Dashboard. The information in your profile will be shared with users of your application when they manage their connection on the <a href="https://my.plaid.com" rel="nofollow noopener noreferrer" target="_blank">Plaid Portal</a>, and must be completed before connecting to certain institutions.</p><a href="/docs/payment-initiation/add-to-app/#access-payment-initiation"><h4>Access Payment Initiation<span data-algolia="linkedHeadingAnchor" id="access-payment-initiation"></span></h4></a><p>Payment Initiation is enabled in Sandbox by default. It uses test data and does not interact with financial institutions. You'll need to request access to Payment Initiation before using it in either Development or Production. To get access to Payment Initiation, <a href="https://dashboard.plaid.com/support/new/product-and-development/product-troubleshooting/request-product-access" rel="nofollow noopener noreferrer" target="_blank">submit a product access request Support ticket</a>.</p><a href="/docs/payment-initiation/add-to-app/#install-and-initialize-plaid-libraries"><h4>Install and initialize Plaid libraries<span data-algolia="linkedHeadingAnchor" id="install-and-initialize-plaid-libraries"></span></h4></a><p>You can use our official server-side client libraries to connect to the Plaid API from your application:</p><span id="content-switcher-unique-id-132">Select group for content switcher</span><div><div aria-labelledby="content-switcher-unique-id-132" role="radiogroup"><button aria-checked="true" role="radio" type="button"><span><span><i><svg aria-hidden="true" role="presentation" viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M0 0h24v24H0z" fill="none"></path><path d="M10.03 17.09l-4.56-4.56 1.06-1.06 3.44 3.44 7.47-8.41 1.12 1-8.53 9.59z" fill="currentColor"></path></svg></i></span><span>Current libraries</span></span></button><button aria-checked="false" role="radio" type="button"><span><span>Legacy libraries</span></span></button></div></div><div><div role="group"><div><label>Terminal</label><div><div><div><div><button aria-controls="dropdown-unique-id-133" aria-expanded="false" aria-haspopup="true" aria-label="Select Language" type="button"><span>Node</span><i><svg aria-hidden="true" height="24" role="presentation" width="24" xmlns="http://www.w3.org/2000/svg"><g fill="none" fill-rule="evenodd"><path d="M0 0h24v24H0z"></path><path d="M12 14.06l-3.53-3.53 1.06-1.06L12 11.94l2.47-2.47 1.06 1.06z" fill="currentColor"></path></g></svg></i></button></div><div data-popper-escaped="true" data-popper-placement="top" data-popper-reference-hidden="true" role="tooltip"><span>Select Language</span></div></div><div id="dropdown-unique-id-133" role="menu"><ul><li><button aria-current="false" label="Curl" type="button" value="bash"><span><span>Curl</span></span></button></li><li><button aria-current="true" label="Node" type="button" value="node"><span><span>Node</span></span><i><svg aria-hidden="true" role="presentation" viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M0 0h24v24H0z" fill="none"></path><path d="M10.03 17.09l-4.56-4.56 1.06-1.06 3.44 3.44 7.47-8.41 1.12 1-8.53 9.59z" fill="currentColor"></path></svg></i></button></li><li><button aria-current="false" label="Python" type="button" value="python"><span><span>Python</span></span></button></li><li><button aria-current="false" label="Ruby" type="button" value="ruby"><span><span>Ruby</span></span></button></li><li><button aria-current="false" label="Java" type="button" value="java"><span><span>Java</span></span></button></li><li><button aria-current="false" label="Go" type="button" value="go"><span><span>Go</span></span></button></li></ul></div></div><button role="button" type="button"><span><span><span><i><svg aria-hidden="true" role="presentation" viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M0 0h24v24H0z" fill="none"></path><path d="M21.54 11.12l-5.66-5.66a1.24 1.24 0 00-1.76 0l-2.2 2.2-2-2a1.26 1.26 0 00-1.75 0l-5.5 5.5a1.21 1.21 0 000 1.75l5.5 5.5a1.21 1.21 0 001.75 0l2.05-2 2.2 2.2a1.23 1.23 0 001.76 0l5.66-5.66a1.24 1.24 0 00-.05-1.83zM9 17.13L3.87 12 9 6.87l1.85 1.85-2.39 2.4a1.24 1.24 0 000 1.76l2.39 2.4zm6 .17L9.7 12 15 6.7l5.3 5.3z" fill="currentColor"></path></svg></i><i><svg aria-hidden="true" role="presentation" viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M0 0h24v24H0z" fill="none"></path><path d="M10.03 17.09l-4.56-4.56 1.06-1.06 3.44 3.44 7.47-8.41 1.12 1-8.53 9.59z" fill="currentColor"></path></svg></i></span></span><span><span>Copy</span></span></span></button></div></div><div data-id="scroll-container" tabindex="-1"><div><pre><code><div><span>1</span><span>// Install via npm</span><span></span></div><div><span>2</span><span>npm install </span><span>--</span><span>save plaid</span></div></code></pre></div></div></div></div><p>After you've installed Plaid's client libraries, you can initialize them by passing in your <code>client_id</code>, <code>secret</code>, and the environment you wish to connect to (Sandbox, Development, or Production). This will make sure the client libraries pass along your <code>client_id</code> and <code>secret</code> with each request, and you won't need to include them in any other calls.</p><p>In the code samples below, you will need to replace <code>PLAID_CLIENT_ID</code> and <code>PLAID_SECRET</code> with your own keys, which you can get from the <a href="https://dashboard.plaid.com/developers/keys" rel="nofollow noopener noreferrer" target="_blank">Dashboard</a>. These code samples also show starting up a server used in each framework (such as Express or Flask).</p><span id="content-switcher-unique-id-134">Select group for content switcher</span><div><div aria-labelledby="content-switcher-unique-id-134" role="radiogroup"><button aria-checked="true" role="radio" type="button"><span><span><i><svg aria-hidden="true" role="presentation" viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M0 0h24v24H0z" fill="none"></path><path d="M10.03 17.09l-4.56-4.56 1.06-1.06 3.44 3.44 7.47-8.41 1.12 1-8.53 9.59z" fill="currentColor"></path></svg></i></span><span>Current libraries</span></span></button><button aria-checked="false" role="radio" type="button"><span><span>Legacy libraries</span></span></button></div></div><div><div role="group"><div><label>server.js</label><div><div><div><div><button aria-controls="dropdown-unique-id-135" aria-expanded="false" aria-haspopup="true" aria-label="Select Language" type="button"><span>Node</span><i><svg aria-hidden="true" height="24" role="presentation" width="24" xmlns="http://www.w3.org/2000/svg"><g fill="none" fill-rule="evenodd"><path d="M0 0h24v24H0z"></path><path d="M12 14.06l-3.53-3.53 1.06-1.06L12 11.94l2.47-2.47 1.06 1.06z" fill="currentColor"></path></g></svg></i></button></div><div data-popper-escaped="true" data-popper-placement="top" data-popper-reference-hidden="true" role="tooltip"><span>Select Language</span></div></div><div id="dropdown-unique-id-135" role="menu"><ul><li><button aria-current="false" label="Curl" type="button" value="bash"><span><span>Curl</span></span></button></li><li><button aria-current="true" label="Node" type="button" value="node"><span><span>Node</span></span><i><svg aria-hidden="true" role="presentation" viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M0 0h24v24H0z" fill="none"></path><path d="M10.03 17.09l-4.56-4.56 1.06-1.06 3.44 3.44 7.47-8.41 1.12 1-8.53 9.59z" fill="currentColor"></path></svg></i></button></li><li><button aria-current="false" label="Python" type="button" value="python"><span><span>Python</span></span></button></li><li><button aria-current="false" label="Ruby" type="button" value="ruby"><span><span>Ruby</span></span></button></li><li><button aria-current="false" label="Java" type="button" value="java"><span><span>Java</span></span></button></li><li><button aria-current="false" label="Go" type="button" value="go"><span><span>Go</span></span></button></li></ul></div></div><button role="button" type="button"><span><span><span><i><svg aria-hidden="true" role="presentation" viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M0 0h24v24H0z" fill="none"></path><path d="M21.54 11.12l-5.66-5.66a1.24 1.24 0 00-1.76 0l-2.2 2.2-2-2a1.26 1.26 0 00-1.75 0l-5.5 5.5a1.21 1.21 0 000 1.75l5.5 5.5a1.21 1.21 0 001.75 0l2.05-2 2.2 2.2a1.23 1.23 0 001.76 0l5.66-5.66a1.24 1.24 0 00-.05-1.83zM9 17.13L3.87 12 9 6.87l1.85 1.85-2.39 2.4a1.24 1.24 0 000 1.76l2.39 2.4zm6 .17L9.7 12 15 6.7l5.3 5.3z" fill="currentColor"></path></svg></i><i><svg aria-hidden="true" role="presentation" viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M0 0h24v24H0z" fill="none"></path><path d="M10.03 17.09l-4.56-4.56 1.06-1.06 3.44 3.44 7.47-8.41 1.12 1-8.53 9.59z" fill="currentColor"></path></svg></i></span></span><span><span>Copy</span></span></span></button></div></div><div data-id="scroll-container" tabindex="-1"><div><pre><code><div><span>1</span><span>// Using Express</span><span></span></div><div><span>2</span><span></span><span>const</span><span> express </span><span>=</span><span> </span><span>require</span><span>(</span><span>'express'</span><span>)</span><span>;</span><span></span></div><div><span>3</span><span></span><span>const</span><span> app </span><span>=</span><span> </span><span>express</span><span>(</span><span>)</span><span>;</span><span></span></div><div><span>4</span><span>app</span><span>.</span><span>use</span><span>(</span><span>express</span><span>.</span><span>json</span><span>(</span><span>)</span><span>)</span><span>;</span><span></span></div><div><span>5</span><span></span></div><div><span>6</span><span></span><span>const</span><span> </span><span>{</span><span> </span><span>Configuration</span><span>,</span><span> </span><span>PlaidApi</span><span>,</span><span> </span><span>PlaidEnvironments</span><span> </span><span>}</span><span> </span><span>=</span><span> </span><span>require</span><span>(</span><span>'plaid'</span><span>)</span><span>;</span><span></span></div><div><span>7</span><span></span></div><div><span>8</span><span></span><span>const</span><span> configuration </span><span>=</span><span> </span><span>new</span><span> </span><span>Configuration</span><span>(</span><span>{</span><span></span></div><div><span>9</span><span>  basePath</span><span>:</span><span> </span><span>PlaidEnvironments</span><span>.</span><span>sandbox</span><span>,</span><span></span></div><div><span>10</span><span>  baseOptions</span><span>:</span><span> </span><span>{</span><span></span></div><div><span>11</span><span>    headers</span><span>:</span><span> </span><span>{</span><span></span></div><div><span>12</span><span>      </span><span>'PLAID-CLIENT-ID'</span><span>:</span><span> process</span><span>.</span><span>env</span><span>.</span><span>PLAID_CLIENT_ID</span><span>,</span><span></span></div><div><span>13</span><span>      </span><span>'PLAID-SECRET'</span><span>:</span><span> process</span><span>.</span><span>env</span><span>.</span><span>PLAID_SECRET</span><span>,</span><span></span></div><div><span>14</span><span>    </span><span>}</span><span>,</span><span></span></div><div><span>15</span><span>  </span><span>}</span><span>,</span><span></span></div><div><span>16</span><span></span><span>}</span><span>)</span><span>;</span><span></span></div><div><span>17</span><span></span></div><div><span>18</span><span></span><span>const</span><span> client </span><span>=</span><span> </span><span>new</span><span> </span><span>PlaidApi</span><span>(</span><span>configuration</span><span>)</span><span>;</span></div></code></pre></div></div></div></div><a href="/docs/payment-initiation/add-to-app/#setting-up-the-payment"><h4>Setting up the payment<span data-algolia="linkedHeadingAnchor" id="setting-up-the-payment"></span></h4></a><p>Before we jump into the code, let's see an overview of the steps needed to set up your payment with Plaid:</p><div><div><span><b>1</b></span><span>Your app collects information of the sender and the recipient, as well as the payment amount.</span></div><div><div><img alt="Step 1 diagram" height="" src="/_next/image?url=/assets/img/docs/payment_initiation/setup_flow/payment-setup-row-1.png&amp;w=1920&amp;q=75" width=""/></div></div></div><div><div><span><b>2</b></span><span>With this information,<!-- --> <a href="/docs/api/products/payment-initiation/#payment_initiationrecipientcreate"><b>create a recipient</b></a> <!-- -->and obtain a <code>recipient_id</code>. You can reuse this<!-- --> <code>recipient_id</code> for future payments.</span></div><div><div><img alt="Step 2 diagram" height="" src="/_next/image?url=/assets/img/docs/payment_initiation/setup_flow/payment-setup-row-2.png&amp;w=1920&amp;q=75" width=""/></div></div></div><div><div><span><b>3</b></span><span>Provide the <code>recipient_id</code> to Plaid when you<!-- --> <a href="/docs/api/products/payment-initiation/#payment_initiationpaymentcreate"><b>create a payment</b></a>. Store the resulting <code>payment_id</code> along with your payment metadata.</span></div><div><div><img alt="Step 3 diagram" height="" src="/_next/image?url=/assets/img/docs/payment_initiation/setup_flow/payment-setup-row-3.png&amp;w=1920&amp;q=75" width=""/></div></div></div><div><div><span><b>4</b></span><span>From your backend, use the <code>payment_id</code> to<!-- --> <a href="/docs/api/tokens/#linktokencreate"><b>create a link_token</b></a>.</span></div><div><div><img alt="Step 4 diagram" height="" src="/_next/image?url=/assets/img/docs/payment_initiation/setup_flow/payment-setup-row-4.png&amp;w=1920&amp;q=75" width=""/></div></div></div><div><div><span><b>5</b></span><span>Finally, pass the <code>link_token</code> to your client app to<!-- --> <a href="/docs/link/#initializing-link"><b>initialize Link</b></a>.</span></div><div><div><img alt="Step 5 diagram" height="" src="/_next/image?url=/assets/img/docs/payment_initiation/setup_flow/payment-setup-row-5.png&amp;w=1920&amp;q=75" width=""/></div></div></div><a href="/docs/payment-initiation/add-to-app/#create-a-recipient"><h5>Create a recipient<span data-algolia="linkedHeadingAnchor" id="create-a-recipient"></span></h5></a><p>Before beginning the payment initiation process, you will need to know the name and account information of the recipient. With this information in hand, you can then call <a href="/docs/api/products/payment-initiation/#payment_initiationrecipientcreate"><code>/payment_initiation/recipient/create</code></a> to create a payment recipient and receive a <code>recipient_id</code>. You can later reuse this <code>recipient_id</code> for future payments to the same account.</p><span id="content-switcher-unique-id-136">Select group for content switcher</span><div><div aria-labelledby="content-switcher-unique-id-136" role="radiogroup"><button aria-checked="true" role="radio" type="button"><span><span><i><svg aria-hidden="true" role="presentation" viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M0 0h24v24H0z" fill="none"></path><path d="M10.03 17.09l-4.56-4.56 1.06-1.06 3.44 3.44 7.47-8.41 1.12 1-8.53 9.59z" fill="currentColor"></path></svg></i></span><span>Current libraries</span></span></button><button aria-checked="false" role="radio" type="button"><span><span>Legacy libraries</span></span></button></div></div><div><div role="group"><div><label> </label><div><div><div><div><button aria-controls="dropdown-unique-id-137" aria-expanded="false" aria-haspopup="true" aria-label="Select Language" type="button"><span>Node</span><i><svg aria-hidden="true" height="24" role="presentation" width="24" xmlns="http://www.w3.org/2000/svg"><g fill="none" fill-rule="evenodd"><path d="M0 0h24v24H0z"></path><path d="M12 14.06l-3.53-3.53 1.06-1.06L12 11.94l2.47-2.47 1.06 1.06z" fill="currentColor"></path></g></svg></i></button></div><div data-popper-escaped="true" data-popper-placement="top" data-popper-reference-hidden="true" role="tooltip"><span>Select Language</span></div></div><div id="dropdown-unique-id-137" role="menu"><ul><li><button aria-current="false" label="Curl" type="button" value="bash"><span><span>Curl</span></span></button></li><li><button aria-current="true" label="Node" type="button" value="node"><span><span>Node</span></span><i><svg aria-hidden="true" role="presentation" viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M0 0h24v24H0z" fill="none"></path><path d="M10.03 17.09l-4.56-4.56 1.06-1.06 3.44 3.44 7.47-8.41 1.12 1-8.53 9.59z" fill="currentColor"></path></svg></i></button></li><li><button aria-current="false" label="Python" type="button" value="python"><span><span>Python</span></span></button></li><li><button aria-current="false" label="Ruby" type="button" value="ruby"><span><span>Ruby</span></span></button></li><li><button aria-current="false" label="Java" type="button" value="java"><span><span>Java</span></span></button></li><li><button aria-current="false" label="Go" type="button" value="go"><span><span>Go</span></span></button></li></ul></div></div><button role="button" type="button"><span><span><span><i><svg aria-hidden="true" role="presentation" viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M0 0h24v24H0z" fill="none"></path><path d="M21.54 11.12l-5.66-5.66a1.24 1.24 0 00-1.76 0l-2.2 2.2-2-2a1.26 1.26 0 00-1.75 0l-5.5 5.5a1.21 1.21 0 000 1.75l5.5 5.5a1.21 1.21 0 001.75 0l2.05-2 2.2 2.2a1.23 1.23 0 001.76 0l5.66-5.66a1.24 1.24 0 00-.05-1.83zM9 17.13L3.87 12 9 6.87l1.85 1.85-2.39 2.4a1.24 1.24 0 000 1.76l2.39 2.4zm6 .17L9.7 12 15 6.7l5.3 5.3z" fill="currentColor"></path></svg></i><i><svg aria-hidden="true" role="presentation" viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M0 0h24v24H0z" fill="none"></path><path d="M10.03 17.09l-4.56-4.56 1.06-1.06 3.44 3.44 7.47-8.41 1.12 1-8.53 9.59z" fill="currentColor"></path></svg></i></span></span><span><span>Copy</span></span></span></button></div></div><div data-id="scroll-container" tabindex="0"><div><pre><code><div><span>1</span><span>const</span><span> </span><span>{</span><span> </span><span>PaymentInitiationRecipientCreateRequest</span><span> </span><span>}</span><span> </span><span>=</span><span> </span><span>require</span><span>(</span><span>'plaid'</span><span>)</span><span>;</span><span></span></div><div><span>2</span><span></span></div><div><span>3</span><span></span><span>// Using BACS, without IBAN or address</span><span></span></div><div><span>4</span><span></span><span>const</span><span> request</span><span>:</span><span> </span><span>PaymentInitiationRecipientCreateRequest</span><span> </span><span>=</span><span> </span><span>{</span><span></span></div><div><span>5</span><span> name</span><span>:</span><span> </span><span>'John Doe'</span><span>,</span><span></span></div><div><span>6</span><span> bacs</span><span>:</span><span> </span><span>{</span><span></span></div><div><span>7</span><span>    account</span><span>:</span><span> </span><span>'26207729'</span><span>,</span><span></span></div><div><span>8</span><span>    sort_code</span><span>:</span><span> </span><span>'560029'</span><span>,</span><span></span></div><div><span>9</span><span>  </span><span>}</span><span>,</span><span></span></div><div><span>10</span><span></span><span>}</span><span>;</span><span></span></div><div><span>11</span><span></span><span>try</span><span> </span><span>{</span><span></span></div><div><span>12</span><span> </span><span>const</span><span> response </span><span>=</span><span> </span><span>await</span><span> plaidClient</span><span>.</span><span>paymentInitiationRecipientCreate</span><span>(</span><span>request</span><span>)</span><span>;</span><span></span></div><div><span>13</span><span> </span><span>const</span><span> recipientID </span><span>=</span><span> response</span><span>.</span><span>data</span><span>.</span><span>recipient_id</span><span>;</span><span></span></div><div><span>14</span><span></span><span>}</span><span> </span><span>catch</span><span> </span><span>(</span><span>error</span><span>)</span><span> </span><span>{</span><span></span></div><div><span>15</span><span> </span><span>// handle error</span><span></span></div><div><span>16</span><span></span><span>}</span></div></code></pre></div></div></div></div><a href="/docs/payment-initiation/add-to-app/#create-a-payment"><h5>Create a payment<span data-algolia="linkedHeadingAnchor" id="create-a-payment"></span></h5></a><p>Now that you have the <code>recipient_id</code>, you can provide it together with the payment amount to <a href="/docs/api/products/payment-initiation/#payment_initiationpaymentcreate"><code>/payment_initiation/payment/create</code></a>, which returns a <code>payment_id</code>.</p><span id="content-switcher-unique-id-138">Select group for content switcher</span><div><div aria-labelledby="content-switcher-unique-id-138" role="radiogroup"><button aria-checked="true" role="radio" type="button"><span><span><i><svg aria-hidden="true" role="presentation" viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M0 0h24v24H0z" fill="none"></path><path d="M10.03 17.09l-4.56-4.56 1.06-1.06 3.44 3.44 7.47-8.41 1.12 1-8.53 9.59z" fill="currentColor"></path></svg></i></span><span>Current libraries</span></span></button><button aria-checked="false" role="radio" type="button"><span><span>Legacy libraries</span></span></button></div></div><div><div role="group"><div><label> </label><div><div><div><div><button aria-controls="dropdown-unique-id-139" aria-expanded="false" aria-haspopup="true" aria-label="Select Language" type="button"><span>Node</span><i><svg aria-hidden="true" height="24" role="presentation" width="24" xmlns="http://www.w3.org/2000/svg"><g fill="none" fill-rule="evenodd"><path d="M0 0h24v24H0z"></path><path d="M12 14.06l-3.53-3.53 1.06-1.06L12 11.94l2.47-2.47 1.06 1.06z" fill="currentColor"></path></g></svg></i></button></div><div data-popper-escaped="true" data-popper-placement="top" data-popper-reference-hidden="true" role="tooltip"><span>Select Language</span></div></div><div id="dropdown-unique-id-139" role="menu"><ul><li><button aria-current="false" label="Curl" type="button" value="bash"><span><span>Curl</span></span></button></li><li><button aria-current="true" label="Node" type="button" value="node"><span><span>Node</span></span><i><svg aria-hidden="true" role="presentation" viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M0 0h24v24H0z" fill="none"></path><path d="M10.03 17.09l-4.56-4.56 1.06-1.06 3.44 3.44 7.47-8.41 1.12 1-8.53 9.59z" fill="currentColor"></path></svg></i></button></li><li><button aria-current="false" label="Python" type="button" value="python"><span><span>Python</span></span></button></li><li><button aria-current="false" label="Ruby" type="button" value="ruby"><span><span>Ruby</span></span></button></li><li><button aria-current="false" label="Java" type="button" value="java"><span><span>Java</span></span></button></li><li><button aria-current="false" label="Go" type="button" value="go"><span><span>Go</span></span></button></li></ul></div></div><button role="button" type="button"><span><span><span><i><svg aria-hidden="true" role="presentation" viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M0 0h24v24H0z" fill="none"></path><path d="M21.54 11.12l-5.66-5.66a1.24 1.24 0 00-1.76 0l-2.2 2.2-2-2a1.26 1.26 0 00-1.75 0l-5.5 5.5a1.21 1.21 0 000 1.75l5.5 5.5a1.21 1.21 0 001.75 0l2.05-2 2.2 2.2a1.23 1.23 0 001.76 0l5.66-5.66a1.24 1.24 0 00-.05-1.83zM9 17.13L3.87 12 9 6.87l1.85 1.85-2.39 2.4a1.24 1.24 0 000 1.76l2.39 2.4zm6 .17L9.7 12 15 6.7l5.3 5.3z" fill="currentColor"></path></svg></i><i><svg aria-hidden="true" role="presentation" viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M0 0h24v24H0z" fill="none"></path><path d="M10.03 17.09l-4.56-4.56 1.06-1.06 3.44 3.44 7.47-8.41 1.12 1-8.53 9.59z" fill="currentColor"></path></svg></i></span></span><span><span>Copy</span></span></span></button></div></div><div data-id="scroll-container" tabindex="0"><div><pre><code><div><span>1</span><span>const</span><span> </span><span>{</span><span> </span><span>PaymentInitiationPaymentCreateRequest</span><span> </span><span>}</span><span> </span><span>=</span><span> </span><span>require</span><span>(</span><span>'plaid'</span><span>)</span><span>;</span><span></span></div><div><span>2</span><span></span></div><div><span>3</span><span></span><span>const</span><span> request</span><span>:</span><span> </span><span>PaymentInitiationPaymentCreateRequest</span><span> </span><span>=</span><span> </span><span>{</span><span></span></div><div><span>4</span><span> recipient_id</span><span>:</span><span> recipientID</span><span>,</span><span></span></div><div><span>5</span><span> reference</span><span>:</span><span> </span><span>'TestPayment'</span><span>,</span><span></span></div><div><span>6</span><span> amount</span><span>:</span><span> </span><span>{</span><span></span></div><div><span>7</span><span>    currency</span><span>:</span><span> </span><span>'GBP'</span><span>,</span><span></span></div><div><span>8</span><span>    value</span><span>:</span><span> </span><span>100.0</span><span>,</span><span></span></div><div><span>9</span><span>  </span><span>}</span><span>,</span><span></span></div><div><span>10</span><span></span><span>}</span><span>;</span><span></span></div><div><span>11</span><span></span><span>try</span><span> </span><span>{</span><span></span></div><div><span>12</span><span> </span><span>const</span><span> response </span><span>=</span><span> </span><span>await</span><span> plaidClient</span><span>.</span><span>paymentInitiationPaymentCreate</span><span>(</span><span>request</span><span>)</span><span>;</span><span></span></div><div><span>13</span><span> </span><span>const</span><span> paymentID </span><span>=</span><span> response</span><span>.</span><span>data</span><span>.</span><span>payment_id</span><span>;</span><span></span></div><div><span>14</span><span> </span><span>const</span><span> status </span><span>=</span><span> response</span><span>.</span><span>data</span><span>.</span><span>status</span><span>;</span><span></span></div><div><span>15</span><span></span><span>}</span><span> </span><span>catch</span><span> </span><span>(</span><span>error</span><span>)</span><span> </span><span>{</span><span></span></div><div><span>16</span><span> </span><span>// handle error</span><span></span></div><div><span>17</span><span></span><span>}</span></div></code></pre></div></div></div></div><div><i><svg aria-hidden="true" role="presentation" viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M0 0h24v24H0z" fill="none"></path><path d="M12.75 16h-1.5v-5h1.5zM12 8a1 1 0 101 1 1 1 0 00-1-1zm8.75 4A8.75 8.75 0 1012 20.75 8.77 8.77 0 0020.75 12zm-1.5 0A7.25 7.25 0 1112 4.75 7.26 7.26 0 0119.25 12z" fill="currentColor"></path></svg></i><div><p>  Make sure to store the <code>payment_id</code> in your backend together with your own metadata (e.g. your internal <code>user_id</code>). You can use this later to process the <a href="/docs/api/products/payment-initiation/#webhooks">payment status updates</a></p></div></div><a href="/docs/payment-initiation/add-to-app/#create-a-link_token"><h5>Create a link_token<span data-algolia="linkedHeadingAnchor" id="create-a-link_token"></span></h5></a><p>Before initializing Link, you need to create a new <code>link_token</code> on the server side of your application.
A <code>link_token</code> is a short-lived, one-time use token that is used to authenticate your app with Link.
You can create one using the <a href="/docs/api/tokens/#linktokencreate"><code>/link/token/create</code></a> endpoint. Then, on the client side of your application, you'll need to initialize Link with the <code>link_token</code> that you created. This will bring up the Payment Initiation flow in Link that allows your end user to confirm the payment.</p><p>When calling <a href="/docs/api/tokens/#linktokencreate"><code>/link/token/create</code></a> to create a token for use with Payment Initiation, you provide the <code>payment_id</code> and specify <code>payment_initiation</code> as the product.</p><div><i><svg aria-hidden="true" role="presentation" viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M0 0h24v24H0z" fill="none"></path><path d="M12.75 16h-1.5v-5h1.5zM12 8a1 1 0 101 1 1 1 0 00-1-1zm8.75 4A8.75 8.75 0 1012 20.75 8.77 8.77 0 0020.75 12zm-1.5 0A7.25 7.25 0 1112 4.75 7.26 7.26 0 0119.25 12z" fill="currentColor"></path></svg></i><div><p>  While it is possible to initialize Link with many products, <code>payment_initiation</code> cannot be specified along with any other products and must be the only product in Link's product array if it is being used.</p></div></div><p>In the code samples below, you will need to replace <code>PLAID_CLIENT_ID</code> and <code>PLAID_SECRET</code> with your own keys, which you can get from the <a href="https://dashboard.plaid.com/developers/keys" rel="nofollow noopener noreferrer" target="_blank">Dashboard</a>.</p><span id="content-switcher-unique-id-140">Select group for content switcher</span><div><div aria-labelledby="content-switcher-unique-id-140" role="radiogroup"><button aria-checked="true" role="radio" type="button"><span><span><i><svg aria-hidden="true" role="presentation" viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M0 0h24v24H0z" fill="none"></path><path d="M10.03 17.09l-4.56-4.56 1.06-1.06 3.44 3.44 7.47-8.41 1.12 1-8.53 9.59z" fill="currentColor"></path></svg></i></span><span>Current libraries</span></span></button><button aria-checked="false" role="radio" type="button"><span><span>Legacy libraries</span></span></button></div></div><div><div role="group"><div><label>server.js</label><div><div><div><div><button aria-controls="dropdown-unique-id-141" aria-expanded="false" aria-haspopup="true" aria-label="Select Language" type="button"><span>Node</span><i><svg aria-hidden="true" height="24" role="presentation" width="24" xmlns="http://www.w3.org/2000/svg"><g fill="none" fill-rule="evenodd"><path d="M0 0h24v24H0z"></path><path d="M12 14.06l-3.53-3.53 1.06-1.06L12 11.94l2.47-2.47 1.06 1.06z" fill="currentColor"></path></g></svg></i></button></div><div data-popper-escaped="true" data-popper-placement="top" data-popper-reference-hidden="true" role="tooltip"><span>Select Language</span></div></div><div id="dropdown-unique-id-141" role="menu"><ul><li><button aria-current="false" label="Curl" type="button" value="bash"><span><span>Curl</span></span></button></li><li><button aria-current="true" label="Node" type="button" value="node"><span><span>Node</span></span><i><svg aria-hidden="true" role="presentation" viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M0 0h24v24H0z" fill="none"></path><path d="M10.03 17.09l-4.56-4.56 1.06-1.06 3.44 3.44 7.47-8.41 1.12 1-8.53 9.59z" fill="currentColor"></path></svg></i></button></li><li><button aria-current="false" label="Python" type="button" value="python"><span><span>Python</span></span></button></li><li><button aria-current="false" label="Ruby" type="button" value="ruby"><span><span>Ruby</span></span></button></li><li><button aria-current="false" label="Java" type="button" value="java"><span><span>Java</span></span></button></li><li><button aria-current="false" label="Go" type="button" value="go"><span><span>Go</span></span></button></li></ul></div></div><button role="button" type="button"><span><span><span><i><svg aria-hidden="true" role="presentation" viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M0 0h24v24H0z" fill="none"></path><path d="M21.54 11.12l-5.66-5.66a1.24 1.24 0 00-1.76 0l-2.2 2.2-2-2a1.26 1.26 0 00-1.75 0l-5.5 5.5a1.21 1.21 0 000 1.75l5.5 5.5a1.21 1.21 0 001.75 0l2.05-2 2.2 2.2a1.23 1.23 0 001.76 0l5.66-5.66a1.24 1.24 0 00-.05-1.83zM9 17.13L3.87 12 9 6.87l1.85 1.85-2.39 2.4a1.24 1.24 0 000 1.76l2.39 2.4zm6 .17L9.7 12 15 6.7l5.3 5.3z" fill="currentColor"></path></svg></i><i><svg aria-hidden="true" role="presentation" viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M0 0h24v24H0z" fill="none"></path><path d="M10.03 17.09l-4.56-4.56 1.06-1.06 3.44 3.44 7.47-8.41 1.12 1-8.53 9.59z" fill="currentColor"></path></svg></i></span></span><span><span>Copy</span></span></span></button></div></div><div data-id="scroll-container" tabindex="-1"><div><pre><code><div><span>1</span><span>// Using Express</span><span></span></div><div><span>2</span><span>app</span><span>.</span><span>post</span><span>(</span><span>'/api/create_link_token'</span><span>,</span><span> </span><span>async</span><span> </span><span>function</span><span> </span><span>(</span><span>request</span><span>,</span><span> response</span><span>)</span><span> </span><span>{</span><span></span></div><div><span>3</span><span>  </span><span>const</span><span> configs </span><span>=</span><span> </span><span>{</span><span></span></div><div><span>4</span><span>    user</span><span>:</span><span> </span><span>{</span><span></span></div><div><span>5</span><span>      </span><span>// This should correspond to a unique id for the current user.</span><span></span></div><div><span>6</span><span>      client_user_id</span><span>:</span><span> </span><span>'user-id'</span><span>,</span><span></span></div><div><span>7</span><span>    </span><span>}</span><span>,</span><span></span></div><div><span>8</span><span>    client_name</span><span>:</span><span> </span><span>'Plaid Test App'</span><span>,</span><span></span></div><div><span>9</span><span>    products</span><span>:</span><span> </span><span>[</span><span>Products</span><span>.</span><span>PaymentInitiation</span><span>]</span><span>,</span><span></span></div><div><span>10</span><span>    language</span><span>:</span><span> </span><span>'en'</span><span>,</span><span></span></div><div><span>11</span><span>    webhook</span><span>:</span><span> </span><span>'https://webhook.sample.com'</span><span>,</span><span></span></div><div><span>12</span><span>    country_codes</span><span>:</span><span> </span><span>[</span><span>CountryCode</span><span>.</span><span>Gb</span><span>]</span><span>,</span><span></span></div><div><span>13</span><span>    payment_initiation</span><span>:</span><span> </span><span>{</span><span></span></div><div><span>14</span><span>      payment_id</span><span>:</span><span> paymentID</span><span>,</span><span></span></div><div><span>15</span><span>    </span><span>}</span><span>,</span><span></span></div><div><span>16</span><span>  </span><span>}</span><span>;</span><span></span></div><div><span>17</span><span>  </span><span>try</span><span> </span><span>{</span><span></span></div><div><span>18</span><span>    </span><span>const</span><span> createTokenResponse </span><span>=</span><span> </span><span>await</span><span> client</span><span>.</span><span>linkTokenCreate</span><span>(</span><span>configs</span><span>)</span><span>;</span><span></span></div><div><span>19</span><span>    response</span><span>.</span><span>json</span><span>(</span><span>createTokenResponse</span><span>.</span><span>data</span><span>)</span><span>;</span><span></span></div><div><span>20</span><span>  </span><span>}</span><span> </span><span>catch</span><span> </span><span>(</span><span>error</span><span>)</span><span> </span><span>{</span><span></span></div><div><span>21</span><span>    </span><span>// handle error</span><span></span></div><div><span>22</span><span>  </span><span>}</span><span></span></div><div><span>23</span><span></span><span>}</span><span>)</span><span>;</span></div></code></pre></div></div></div></div><p>Once you have exposed an endpoint to create a <code>link_token</code> in your application server, you now need to configure your client application to import and use Link.</p><a href="/docs/payment-initiation/add-to-app/#launch-the-payment-initiation-flow-in-link"><h4>Launch the Payment Initiation flow in Link<span data-algolia="linkedHeadingAnchor" id="launch-the-payment-initiation-flow-in-link"></span></h4></a><p>Plaid Link is a drop-in module that provides a secure, elegant authentication flow for the many financial institutions that Plaid supports. Link makes it secure and easy for users to connect their bank accounts to Plaid.
Because Link has access to all the details of the payment at the time of initialization, it will display a screen with the payment details already populated. All your end user has to do is log in to their financial institution through a Link-initiated OAuth flow, select a funding account, and confirm the payment details.</p><div></div><p> Note that these instructions cover Link on the web. For instructions on using Link within mobile apps, see the <a href="/docs/link/">Link documentation</a>. If you want to customize Link's look and feel, you can do so from the <a href="https://dashboard.plaid.com/link" rel="nofollow noopener noreferrer" target="_blank">Dashboard</a>.</p><a href="/docs/payment-initiation/add-to-app/#install-link-dependency"><h5>Install Link dependency<span data-algolia="linkedHeadingAnchor" id="install-link-dependency"></span></h5></a><div role="group"><div><label>index.html</label><div><div><div><div><button aria-controls="dropdown-unique-id-142" aria-expanded="false" aria-haspopup="true" aria-label="Select Language" type="button"><span>Node</span><i><svg aria-hidden="true" height="24" role="presentation" width="24" xmlns="http://www.w3.org/2000/svg"><g fill="none" fill-rule="evenodd"><path d="M0 0h24v24H0z"></path><path d="M12 14.06l-3.53-3.53 1.06-1.06L12 11.94l2.47-2.47 1.06 1.06z" fill="currentColor"></path></g></svg></i></button></div><div data-popper-escaped="true" data-popper-placement="top" data-popper-reference-hidden="true" role="tooltip"><span>Select Language</span></div></div><div id="dropdown-unique-id-142" role="menu"><ul><li><button aria-current="false" label="Curl" type="button" value="bash"><span><span>Curl</span></span></button></li><li><button aria-current="true" label="Node" type="button" value="node"><span><span>Node</span></span><i><svg aria-hidden="true" role="presentation" viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M0 0h24v24H0z" fill="none"></path><path d="M10.03 17.09l-4.56-4.56 1.06-1.06 3.44 3.44 7.47-8.41 1.12 1-8.53 9.59z" fill="currentColor"></path></svg></i></button></li><li><button aria-current="false" label="Python" type="button" value="python"><span><span>Python</span></span></button></li><li><button aria-current="false" label="Ruby" type="button" value="ruby"><span><span>Ruby</span></span></button></li><li><button aria-current="false" label="Java" type="button" value="java"><span><span>Java</span></span></button></li><li><button aria-current="false" label="Go" type="button" value="go"><span><span>Go</span></span></button></li></ul></div></div><button role="button" type="button"><span><span><span><i><svg aria-hidden="true" role="presentation" viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M0 0h24v24H0z" fill="none"></path><path d="M21.54 11.12l-5.66-5.66a1.24 1.24 0 00-1.76 0l-2.2 2.2-2-2a1.26 1.26 0 00-1.75 0l-5.5 5.5a1.21 1.21 0 000 1.75l5.5 5.5a1.21 1.21 0 001.75 0l2.05-2 2.2 2.2a1.23 1.23 0 001.76 0l5.66-5.66a1.24 1.24 0 00-.05-1.83zM9 17.13L3.87 12 9 6.87l1.85 1.85-2.39 2.4a1.24 1.24 0 000 1.76l2.39 2.4zm6 .17L9.7 12 15 6.7l5.3 5.3z" fill="currentColor"></path></svg></i><i><svg aria-hidden="true" role="presentation" viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M0 0h24v24H0z" fill="none"></path><path d="M10.03 17.09l-4.56-4.56 1.06-1.06 3.44 3.44 7.47-8.41 1.12 1-8.53 9.59z" fill="currentColor"></path></svg></i></span></span><span><span>Copy</span></span></span></button></div></div><div data-id="scroll-container" tabindex="0"><div><pre><code><div><span>1</span><span>&lt;</span><span>head</span><span>&gt;</span><span></span></div><div><span>2</span><span> </span><span>&lt;</span><span>title</span><span>&gt;</span><span>Link </span><span>for</span><span> Payment Initiation</span><span>&lt;/</span><span>title</span><span>&gt;</span><span></span></div><div><span>3</span><span> </span><span>&lt;</span><span>script</span><span> </span><span>src</span><span>=</span><span>"</span><span>https://cdn.plaid.com/link/v2/stable/link-initialize.js</span><span>"</span><span>&gt;</span><span></span><span>&lt;/</span><span>script</span><span>&gt;</span><span></span></div><div><span>4</span><span></span><span>&lt;/</span><span>head</span><span>&gt;</span></div></code></pre></div></div></div><a href="/docs/payment-initiation/add-to-app/#configure-the-client-side-link-handler"><h5>Configure the client-side Link handler<span data-algolia="linkedHeadingAnchor" id="configure-the-client-side-link-handler"></span></h5></a><p>Plaid communicates to you certain events that relate to how the user is interacting with Link. What you do with each of these event triggers depends on your particular use case, but a basic scaffolding might look like this:</p><div role="group"><div><label>app.js</label><div><button role="button" type="button"><span><span><span><i><svg aria-hidden="true" role="presentation" viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M0 0h24v24H0z" fill="none"></path><path d="M21.54 11.12l-5.66-5.66a1.24 1.24 0 00-1.76 0l-2.2 2.2-2-2a1.26 1.26 0 00-1.75 0l-5.5 5.5a1.21 1.21 0 000 1.75l5.5 5.5a1.21 1.21 0 001.75 0l2.05-2 2.2 2.2a1.23 1.23 0 001.76 0l5.66-5.66a1.24 1.24 0 00-.05-1.83zM9 17.13L3.87 12 9 6.87l1.85 1.85-2.39 2.4a1.24 1.24 0 000 1.76l2.39 2.4zm6 .17L9.7 12 15 6.7l5.3 5.3z" fill="currentColor"></path></svg></i><i><svg aria-hidden="true" role="presentation" viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M0 0h24v24H0z" fill="none"></path><path d="M10.03 17.09l-4.56-4.56 1.06-1.06 3.44 3.44 7.47-8.41 1.12 1-8.53 9.59z" fill="currentColor"></path></svg></i></span></span><span><span>Copy</span></span></span></button></div></div><div data-id="scroll-container" tabindex="0"><div><pre><code><div><span>1</span><span>const</span><span> linkHandler </span><span>=</span><span> </span><span>Plaid</span><span>.</span><span>create</span><span>(</span><span>{</span><span></span></div><div><span>2</span><span>  </span><span>// Create a new link_token to initialize Link</span><span></span></div><div><span>3</span><span>  token</span><span>:</span><span> </span><span>(</span><span>await</span><span> $</span><span>.</span><span>post</span><span>(</span><span>'/create_link_token'</span><span>)</span><span>)</span><span>.</span><span>link_token</span><span>,</span><span></span></div><div><span>4</span><span>  </span><span>onSuccess</span><span>:</span><span> </span><span>(</span><span>public_token</span><span>,</span><span> metadata</span><span>)</span><span> </span><span>=&gt;</span><span> </span><span>{</span><span></span></div><div><span>5</span><span>      </span><span>// Show a success page to your user confirming that the</span><span></span></div><div><span>6</span><span>      </span><span>// payment will be processed.</span><span></span></div><div><span>7</span><span>      </span><span>//</span><span></span></div><div><span>8</span><span>      </span><span>// The 'metadata' object contains info about the institution</span><span></span></div><div><span>9</span><span>      </span><span>// the user selected.</span><span></span></div><div><span>10</span><span>      </span><span>// For example:</span><span></span></div><div><span>11</span><span>      </span><span>//  metadata  = {</span><span></span></div><div><span>12</span><span>      </span><span>//    link_session_id: "123-abc",</span><span></span></div><div><span>13</span><span>      </span><span>//    institution: {</span><span></span></div><div><span>14</span><span>      </span><span>//      institution_id: "ins_117243",</span><span></span></div><div><span>15</span><span>      </span><span>//      name:"Monzo"</span><span></span></div><div><span>16</span><span>      </span><span>//    }</span><span></span></div><div><span>17</span><span>      </span><span>//  }</span><span></span></div><div><span>18</span><span>    </span><span>}</span><span>,</span><span></span></div><div><span>19</span><span>  </span><span>onExit</span><span>:</span><span> </span><span>(</span><span>err</span><span>,</span><span> metadata</span><span>)</span><span> </span><span>=&gt;</span><span> </span><span>{</span><span></span></div><div><span>20</span><span>      </span><span>// The user exited the Link flow.</span><span></span></div><div><span>21</span><span>      </span><span>if</span><span> </span><span>(</span><span>err </span><span>!=</span><span> </span><span>null</span><span>)</span><span> </span><span>{</span><span></span></div><div><span>22</span><span>        </span><span>// The user encountered a Plaid API error prior to exiting.</span><span></span></div><div><span>23</span><span>      </span><span>}</span><span></span></div><div><span>24</span><span>      </span><span>// 'metadata' contains information about the institution</span><span></span></div><div><span>25</span><span>      </span><span>// that the user selected and the most recent API request IDs.</span><span></span></div><div><span>26</span><span>      </span><span>// Storing this information can be helpful for support.</span><span></span></div><div><span>27</span><span>  </span><span>}</span><span>,</span><span></span></div><div><span>28</span><span>  </span><span>onEvent</span><span>:</span><span> </span><span>(</span><span>eventName</span><span>,</span><span> metadata</span><span>)</span><span> </span><span>=&gt;</span><span> </span><span>{</span><span></span></div><div><span>29</span><span>    </span><span>// Optionally capture Link flow events, streamed through</span><span></span></div><div><span>30</span><span>    </span><span>// this callback as your users connect with Plaid.</span><span></span></div><div><span>31</span><span>    </span><span>// For example:</span><span></span></div><div><span>32</span><span>    </span><span>//  eventName = "TRANSITION_VIEW",</span><span></span></div><div><span>33</span><span>    </span><span>//  metadata  = {</span><span></span></div><div><span>34</span><span>    </span><span>//    link_session_id: "123-abc",</span><span></span></div><div><span>35</span><span>    </span><span>//    mfa_type:        "questions",</span><span></span></div><div><span>36</span><span>    </span><span>//    timestamp:       "2017-09-14T14:42:19.350Z",</span><span></span></div><div><span>37</span><span>    </span><span>//    view_name:       "MFA",</span><span></span></div><div><span>38</span><span>    </span><span>//  }</span><span></span></div><div><span>39</span><span>  </span><span>}</span><span>,</span><span></span></div><div><span>40</span><span></span><span>}</span><span>)</span><span>;</span><span></span></div><div><span>41</span><span></span></div><div><span>42</span><span>linkHandler</span><span>.</span><span>open</span><span>(</span><span>)</span><span>;</span></div></code></pre></div></div></div><div><i><svg aria-hidden="true" role="presentation" viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M0 0h24v24H0z" fill="none"></path><path d="M12.75 16h-1.5v-5h1.5zM12 8a1 1 0 101 1 1 1 0 00-1-1zm8.75 4A8.75 8.75 0 1012 20.75 8.77 8.77 0 0020.75 12zm-1.5 0A7.25 7.25 0 1112 4.75 7.26 7.26 0 0119.25 12z" fill="currentColor"></path></svg></i><div><p>Unlike other products, for <code>payment_initiation</code> it is not necessary to exchange the <code>public_token</code> for an <code>access_token</code>. You only need the <code>payment_id</code> to interact with the <code>payment_initiation</code> endpoints.</p></div></div><a href="/docs/payment-initiation/add-to-app/#verify-payment-status"><h4>Verify payment status<span data-algolia="linkedHeadingAnchor" id="verify-payment-status"></span></h4></a><a href="/docs/payment-initiation/add-to-app/#listening-for-status-update-webhooks"><h5>Listening for status update webhooks<span data-algolia="linkedHeadingAnchor" id="listening-for-status-update-webhooks"></span></h5></a><p>Once the payment has been authorised by the end user and the Link flow is completed, the <code>onSuccess</code> callback is invoked, signaling that the payment status is now <code>PAYMENT_STATUS_INITIATED</code>.</p><p>From this point on, you can track the payment status using a <a href="/docs/api/products/payment-initiation/#payment_status_update">webhook</a> that is triggered by Plaid when updates occur:</p><ol><li><p>Updates are sent by Plaid to the <a href="/docs/api/tokens/#link-token-create-request-webhook">configured webhook URL</a> to indicate that the status of an initiated payment has changed. All Payment Initiation webhooks have a <a href="/docs/api/products/payment-initiation/#PaymentStatusUpdateWebhook-webhook-type"><code>webhook_type</code></a> of <code>PAYMENT_INITIATION</code>.</p></li><li><p>Once you receive the status update, use the <a href="/docs/api/products/payment-initiation/#PaymentStatusUpdateWebhook-payment-id"><code>payment_id</code></a> field to retrieve the payment's metadata from your database.</p></li><li><p>From the status update object, use the <a href="/docs/api/products/payment-initiation/#PaymentStatusUpdateWebhook-new-payment-status"><code>new_payment_status</code></a> field to the decide what action needs to be taken for this payment. For example, you may decide to fund the account once the payment status is <code>PAYMENT_STATUS_EXECUTED</code> or notify the user that their payment
got rejected (<code>PAYMENT_STATUS_REJECTED</code>).</p></li></ol><p>For more information on how to implement your webhook listener, see the <a href="/docs/api/webhooks/"><code>webhooks documentation</code></a>.</p><p>The <code>EXECUTED</code> status indicates that funds have left the payer’s account, but it doesn’t offer absolute assurance that funds will settle. If you require strong settlement guarantees, Plaid provides <a href="/docs/virtual-accounts/payment-confirmation/">Payment Confirmation</a> through the <a href="/docs/virtual-accounts/">Virtual Accounts</a> product.</p><p>Generally, payments settle within seconds with instant payment schemes. However, settlement may take one business day or more when slower <a href="/docs/api/products/payment-initiation/#payment_initiation-payment-create-request-options-scheme">payment schemes</a> are selected. The most common payment schemes and their settlement times are:</p><ul><li><a href="https://www.wearepay.uk/what-we-do/payment-systems/faster-payment-system" rel="nofollow noopener noreferrer" target="_blank">Faster Payment System</a>: An instant payment scheme used in the UK. The money is usually available in the receiving customer’s account almost immediately, although it can sometimes take up to two hours.</li><li><a href="https://www.europeanpaymentscouncil.eu/what-we-do/sepa-instant-credit-transfer" rel="nofollow noopener noreferrer" target="_blank">SEPA Instant Credit Transfer</a>: A pan-European instant payment scheme. Under the SEPA Instant Credit Transfer rules, funds will made available on the account in less than ten seconds.</li><li><a href="https://www.europeanpaymentscouncil.eu/what-we-do/sepa-credit-transfer" rel="nofollow noopener noreferrer" target="_blank">SEPA Credit Transfer</a>: A pan-European payment scheme where payments are processed and settled within one business day.</li></ul><a href="/docs/payment-initiation/add-to-app/#polling-for-status-updates"><h5>Polling for status updates<span data-algolia="linkedHeadingAnchor" id="polling-for-status-updates"></span></h5></a><p>The status of a payment can also be retrieved using the <a href="/docs/api/products/payment-initiation/#payment_initiationpaymentget"><code>/payment_initiation/payment/get</code></a> endpoint.</p><span id="content-switcher-unique-id-143">Select group for content switcher</span><div><div aria-labelledby="content-switcher-unique-id-143" role="radiogroup"><button aria-checked="true" role="radio" type="button"><span><span><i><svg aria-hidden="true" role="presentation" viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M0 0h24v24H0z" fill="none"></path><path d="M10.03 17.09l-4.56-4.56 1.06-1.06 3.44 3.44 7.47-8.41 1.12 1-8.53 9.59z" fill="currentColor"></path></svg></i></span><span>Current libraries</span></span></button><button aria-checked="false" role="radio" type="button"><span><span>Legacy libraries</span></span></button></div></div><div><div role="group"><div><label> </label><div><div><div><div><button aria-controls="dropdown-unique-id-144" aria-expanded="false" aria-haspopup="true" aria-label="Select Language" type="button"><span>Node</span><i><svg aria-hidden="true" height="24" role="presentation" width="24" xmlns="http://www.w3.org/2000/svg"><g fill="none" fill-rule="evenodd"><path d="M0 0h24v24H0z"></path><path d="M12 14.06l-3.53-3.53 1.06-1.06L12 11.94l2.47-2.47 1.06 1.06z" fill="currentColor"></path></g></svg></i></button></div><div data-popper-escaped="true" data-popper-placement="top" data-popper-reference-hidden="true" role="tooltip"><span>Select Language</span></div></div><div id="dropdown-unique-id-144" role="menu"><ul><li><button aria-current="false" label="Curl" type="button" value="bash"><span><span>Curl</span></span></button></li><li><button aria-current="true" label="Node" type="button" value="node"><span><span>Node</span></span><i><svg aria-hidden="true" role="presentation" viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M0 0h24v24H0z" fill="none"></path><path d="M10.03 17.09l-4.56-4.56 1.06-1.06 3.44 3.44 7.47-8.41 1.12 1-8.53 9.59z" fill="currentColor"></path></svg></i></button></li><li><button aria-current="false" label="Python" type="button" value="python"><span><span>Python</span></span></button></li><li><button aria-current="false" label="Ruby" type="button" value="ruby"><span><span>Ruby</span></span></button></li><li><button aria-current="false" label="Java" type="button" value="java"><span><span>Java</span></span></button></li><li><button aria-current="false" label="Go" type="button" value="go"><span><span>Go</span></span></button></li></ul></div></div><button role="button" type="button"><span><span><span><i><svg aria-hidden="true" role="presentation" viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M0 0h24v24H0z" fill="none"></path><path d="M21.54 11.12l-5.66-5.66a1.24 1.24 0 00-1.76 0l-2.2 2.2-2-2a1.26 1.26 0 00-1.75 0l-5.5 5.5a1.21 1.21 0 000 1.75l5.5 5.5a1.21 1.21 0 001.75 0l2.05-2 2.2 2.2a1.23 1.23 0 001.76 0l5.66-5.66a1.24 1.24 0 00-.05-1.83zM9 17.13L3.87 12 9 6.87l1.85 1.85-2.39 2.4a1.24 1.24 0 000 1.76l2.39 2.4zm6 .17L9.7 12 15 6.7l5.3 5.3z" fill="currentColor"></path></svg></i><i><svg aria-hidden="true" role="presentation" viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M0 0h24v24H0z" fill="none"></path><path d="M10.03 17.09l-4.56-4.56 1.06-1.06 3.44 3.44 7.47-8.41 1.12 1-8.53 9.59z" fill="currentColor"></path></svg></i></span></span><span><span>Copy</span></span></span></button></div></div><div data-id="scroll-container" tabindex="0"><div><pre><code><div><span>1</span><span>const</span><span> </span><span>{</span><span> </span><span>PaymentInitiationPaymentGetRequest</span><span> </span><span>}</span><span> </span><span>=</span><span> </span><span>require</span><span>(</span><span>'plaid'</span><span>)</span><span>;</span><span></span></div><div><span>2</span><span></span></div><div><span>3</span><span></span><span>const</span><span> request</span><span>:</span><span> </span><span>PaymentInitiationPaymentGetRequest</span><span> </span><span>=</span><span> </span><span>{</span><span></span></div><div><span>4</span><span> payment_id</span><span>:</span><span> paymentID</span><span>,</span><span></span></div><div><span>5</span><span></span><span>}</span><span>;</span><span></span></div><div><span>6</span><span></span><span>try</span><span> </span><span>{</span><span></span></div><div><span>7</span><span> </span><span>const</span><span> response </span><span>=</span><span> </span><span>await</span><span> plaidClient</span><span>.</span><span>paymentInitiationPaymentGet</span><span>(</span><span>request</span><span>)</span><span>;</span><span></span></div><div><span>8</span><span> </span><span>const</span><span> paymentID </span><span>=</span><span> response</span><span>.</span><span>data</span><span>.</span><span>payment_id</span><span>;</span><span></span></div><div><span>9</span><span> </span><span>const</span><span> paymentToken </span><span>=</span><span> response</span><span>.</span><span>data</span><span>.</span><span>payment_token</span><span>;</span><span></span></div><div><span>10</span><span> </span><span>const</span><span> reference </span><span>=</span><span> response</span><span>.</span><span>data</span><span>.</span><span>reference</span><span>;</span><span></span></div><div><span>11</span><span> </span><span>const</span><span> amount </span><span>=</span><span> response</span><span>.</span><span>data</span><span>.</span><span>amount</span><span>;</span><span></span></div><div><span>12</span><span> </span><span>const</span><span> status </span><span>=</span><span> response</span><span>.</span><span>data</span><span>.</span><span>status</span><span>;</span><span></span></div><div><span>13</span><span> </span><span>const</span><span> lastStatusUpdate </span><span>=</span><span> response</span><span>.</span><span>data</span><span>.</span><span>last_status_update</span><span>;</span><span></span></div><div><span>14</span><span> </span><span>const</span><span> paymentTokenExpirationTime </span><span>=</span><span></span></div><div><span>15</span><span> response</span><span>.</span><span>data</span><span>.</span><span>payment_token_expiration_time</span><span>;</span><span></span></div><div><span>16</span><span> </span><span>const</span><span> recipientID </span><span>=</span><span> response</span><span>.</span><span>data</span><span>.</span><span>recipient_id</span><span>;</span><span></span></div><div><span>17</span><span></span><span>}</span><span> </span><span>catch</span><span> </span><span>(</span><span>error</span><span>)</span><span> </span><span>{</span><span></span></div><div><span>18</span><span> </span><span>// handle error</span><span></span></div><div><span>19</span><span></span><span>}</span></div></code></pre></div></div></div></div><a href="/docs/payment-initiation/add-to-app/#sample-code-in-plaid-pattern"><h4>Sample code in Plaid Pattern<span data-algolia="linkedHeadingAnchor" id="sample-code-in-plaid-pattern"></span></h4></a><p>For an example implementation of Payment Initiation, see the <a href="https://github.com/plaid/payment-initiation-pattern-app" rel="nofollow noopener noreferrer" target="_blank">Payment Initiation Pattern App</a> on GitHub, which uses Payment Initiation in an account funding use case.</p><a href="/docs/payment-initiation/add-to-app/#next-steps"><h4>Next steps<span data-algolia="linkedHeadingAnchor" id="next-steps"></span></h4></a><p>If you're ready to launch to Production, see the Launch checklist.</p><div data-algolia-remove="true"><a href="/docs/launch-checklist/"><span><div></div></span><h4>Launch checklist</h4><p>Recommended steps to take before launching in Production</p><span>Launch<i><svg aria-hidden="true" height="24" role="presentation" width="24" xmlns="http://www.w3.org/2000/svg"><g fill="none" fill-rule="evenodd"><path d="M0 0h24v24H0z"></path><path d="M11.55 15.54l-1.06-1.06 2.47-2.47-2.47-2.47 1.06-1.06 3.53 3.53z" fill="currentColor"></path></g></svg></i></span></a></div></main></div></div></div></div><next-route-announcer><p aria-live="assertive" id="__next-route-announcer__" role="alert"></p></next-route-announcer><iframe height="0" id="universal_pixel_u0iai2i" src="https://insight.adsrvr.org/track/up?adv=4azo4ri&amp;ref=https%3A%2F%2Fplaid.com%2Fdocs%2Fpayment-initiation%2Fadd-to-app%2F&amp;upid=u0iai2i&amp;upv=1.1.0" title="TTD Universal Pixel" width="0"></iframe><div id="batBeacon502695103592"><img alt="" height="0" id="batBeacon933972148655" src="https://bat.bing.com/action/0?ti=25047304&amp;Ver=2&amp;mid=571c972d-9721-4c9b-8e34-378e285c7569&amp;sid=839d8000406811ee9647031f9910d79d&amp;vid=839d8d20406811ee8b5bc59b5329b4ac&amp;vids=0&amp;msclkid=N&amp;pi=0&amp;lg=en-US&amp;sw=5120&amp;sh=1440&amp;sc=24&amp;nwd=1&amp;tl=Payment%20Initiation%20(UK%20and%20Europe)%20-%20Add%20Payment%20Initiation%20to%20your%20app%20%7C%20Plaid%20Docs&amp;p=https%3A%2F%2Fplaid.com%2Fdocs%2Fpayment-initiation%2Fadd-to-app%2F&amp;r=&amp;lt=708&amp;evt=pageLoad&amp;sv=1&amp;rn=125998" width="0"/><img alt="" height="0" id="batBeacon243653906845" src="https://bat.bing.com/action/0?ti=25047304&amp;Ver=2&amp;mid=571c972d-9721-4c9b-8e34-378e285c7569&amp;sid=839d8000406811ee9647031f9910d79d&amp;vid=839d8d20406811ee8b5bc59b5329b4ac&amp;vids=0&amp;msclkid=N&amp;ea=track&amp;el=DOCS_EVENT&amp;p=https%3A%2F%2Fplaid.com%2Fdocs%2Fpayment-initiation%2Fadd-to-app%2F&amp;sw=5120&amp;sh=1440&amp;sc=24&amp;nwd=1&amp;evt=custom&amp;rn=487499" width="0"/></div><div>
</div><img height="1" src="https://t.co/i/adsct?bci=3&amp;eci=2&amp;event_id=a6f02639-f9ad-4aa1-b84a-75b58fb381e4&amp;events=%5B%5B%22pageview%22%2C%7B%7D%5D%5D&amp;integration=advertiser&amp;p_id=Twitter&amp;p_user_id=0&amp;pl_id=6e7dab5d-bb8c-4c3c-8665-ff281a9e4e56&amp;tw_document_href=https%3A%2F%2Fplaid.com%2Fdocs%2Fpayment-initiation%2Fadd-to-app%2F&amp;tw_iframe_status=0&amp;tw_order_quantity=0&amp;tw_sale_amount=0&amp;txn_id=o5pi2&amp;type=javascript&amp;version=2.3.29" width="1"/><img height="1" src="https://analytics.twitter.com/i/adsct?bci=3&amp;eci=2&amp;event_id=a6f02639-f9ad-4aa1-b84a-75b58fb381e4&amp;events=%5B%5B%22pageview%22%2C%7B%7D%5D%5D&amp;integration=advertiser&amp;p_id=Twitter&amp;p_user_id=0&amp;pl_id=6e7dab5d-bb8c-4c3c-8665-ff281a9e4e56&amp;tw_document_href=https%3A%2F%2Fplaid.com%2Fdocs%2Fpayment-initiation%2Fadd-to-app%2F&amp;tw_iframe_status=0&amp;tw_order_quantity=0&amp;tw_sale_amount=0&amp;txn_id=o5pi2&amp;type=javascript&amp;version=2.3.29" width="1"/><img height="1" src="https://t.co/i/adsct?bci=3&amp;eci=2&amp;event_id=222aaad2-b190-431b-9129-cc30c998a5f5&amp;events=%5B%5B%22pageview%22%2C%7B%7D%5D%5D&amp;integration=advertiser&amp;p_id=Twitter&amp;p_user_id=0&amp;pl_id=6e7dab5d-bb8c-4c3c-8665-ff281a9e4e56&amp;tw_document_href=https%3A%2F%2Fplaid.com%2Fdocs%2Fpayment-initiation%2Fadd-to-app%2F&amp;tw_iframe_status=0&amp;tw_order_quantity=0&amp;tw_sale_amount=0&amp;txn_id=o5pi2&amp;type=javascript&amp;version=2.3.29" width="1"/><img height="1" src="https://analytics.twitter.com/i/adsct?bci=3&amp;eci=2&amp;event_id=222aaad2-b190-431b-9129-cc30c998a5f5&amp;events=%5B%5B%22pageview%22%2C%7B%7D%5D%5D&amp;integration=advertiser&amp;p_id=Twitter&amp;p_user_id=0&amp;pl_id=6e7dab5d-bb8c-4c3c-8665-ff281a9e4e56&amp;tw_document_href=https%3A%2F%2Fplaid.com%2Fdocs%2Fpayment-initiation%2Fadd-to-app%2F&amp;tw_iframe_status=0&amp;tw_order_quantity=0&amp;tw_sale_amount=0&amp;txn_id=o5pi2&amp;type=javascript&amp;version=2.3.29" width="1"/></body>