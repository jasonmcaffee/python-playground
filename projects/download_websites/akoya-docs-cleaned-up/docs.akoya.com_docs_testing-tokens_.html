<body><h1>testing tokens </h1><div id="ssr-top"></div><div id="ssr-main"><div><main id="content"><div><article><div id="content-container"><section><div><blockquote theme="🚧"><p><span>🚧</span><p>Token required!</p></p><p>Please obtain a token prior to completing this section.</p></blockquote>
<h2 align=""><div id="happy-path-tests"></div><div><div id="section-happy-path-tests"></div>"Happy path" tests</div><a aria-label='Skip link to "Happy path" tests' href="#happy-path-tests" target="_self"></a></h2>
<div><div><table><thead><tr><th>Test case</th><th>Task(s)</th><th>Expected result(s)</th></tr></thead><tbody><tr><td>Refresh an ID token</td><td>Call the <button aria-label="Copy Code"></button><code data-lang="" name="" tabindex="0"><span>/token</span></code> endpoint with the <button aria-label="Copy Code"></button><code data-lang="" name="" tabindex="0"><span>refresh_token</span></code>.</td><td>Receive valid new ID and refresh tokens.</td></tr><tr><td>Refresh an expired ID token</td><td>1. Identify an <button aria-label="Copy Code"></button><code data-lang="" name="" tabindex="0"><span>id_token</span></code> older than 24 hours.<br/><br/>2. Call the <button aria-label="Copy Code"></button><code data-lang="" name="" tabindex="0"><span>/token</span></code> endpoint with the <button aria-label="Copy Code"></button><code data-lang="" name="" tabindex="0"><span>refresh_token</span></code>.</td><td>Receive valid new ID and refresh tokens.</td></tr><tr><td>Revoke an ID token</td><td>1. Call the <button aria-label="Copy Code"></button><code data-lang="" name="" tabindex="0"><span>/token/revoke</span></code> endpoint.<br/><br/>2. Attempt a call to the <button aria-label="Copy Code"></button><code data-lang="" name="" tabindex="0"><span>/accounts</span></code> endpoint.</td><td>1. <button aria-label="Copy Code"></button><code data-lang="" name="" tabindex="0"><span>HTTP 200: OK</span></code> (empty payload)<br/><br/>2. <button aria-label="Copy Code"></button><code data-lang="" name="" tabindex="0"><span>HTTP 401: Unauthorized</span></code><br/><br/>Error payload:<br/><pre>{<br/>   "code": 602,<br/>   "message": "Customer not authorized"<br/>}</pre></td></tr></tbody></table></div></div>
<h2 align=""><div id="sad-path-tests"></div><div><div id="section-sad-path-tests"></div>“Sad path” tests</div><a aria-label="Skip link to “Sad path” tests" href="#sad-path-tests" target="_self"></a></h2>
<p>Please review our <a href="/reference/errors" target="_self">error codes documentation</a>.</p>
<div><div><table><thead><tr><th>Test case</th><th>Task(s)</th><th>Expected result(s)</th></tr></thead><tbody><tr><td>Refresh a used <button aria-label="Copy Code"></button><code data-lang="" name="" tabindex="0"><span>refresh_token</span></code>.</td><td>Test a token refresh call with a <button aria-label="Copy Code"></button><code data-lang="" name="" tabindex="0"><span>refresh_token</span></code> that has already been claimed.</td><td><button aria-label="Copy Code"></button><code data-lang="" name="" tabindex="0"><span>HTTP 400: Bad Request</span></code><br/><br/>Error payload:<br/><pre>{<br/>   "error": "invalid_request",<br/>   "error_description": "Refresh token is invalid or has <br/> already been claimed by another client."<br/>}</pre></td></tr><tr><td>Refresh with invalid <button aria-label="Copy Code"></button><code data-lang="" name="" tabindex="0"><span>client_secret</span></code>.</td><td>Try a token refresh with an invalid <button aria-label="Copy Code"></button><code data-lang="" name="" tabindex="0"><span>client_secret</span></code>.</td><td><button aria-label="Copy Code"></button><code data-lang="" name="" tabindex="0"><span>HTTP 401: Unauthorized</span></code><br/><br/>Error payload:<br/><pre>{<br/>   "error": "invalid_client",<br/>   "error_description": "Invalid client credentials."<br/>}</pre></td></tr><tr><td>Revoke with invalid <button aria-label="Copy Code"></button><code data-lang="" name="" tabindex="0"><span>client_secret</span></code>.</td><td>1. Try the revoke token endpoint <strong>without</strong> a <button aria-label="Copy Code"></button><code data-lang="" name="" tabindex="0"><span>client_secret</span></code>.<br/><br/>2. Try the revoke token endpoint <strong>with an incorrect</strong> <button aria-label="Copy Code"></button><code data-lang="" name="" tabindex="0"><span>client_secret</span></code>.</td><td>1. <button aria-label="Copy Code"></button><code data-lang="" name="" tabindex="0"><span>HTTP 400: Bad Request</span></code><br/><br/>Error payload:<br/><pre>{<br/>   "error": "invalid_request"<br/>}</pre><br/><br/>2. <button aria-label="Copy Code"></button><code data-lang="" name="" tabindex="0"><span>HTTP 401: Unauthorized</span></code><br/><br/>Error payload:<br/><pre>{<br/>   "error": "unauthorized_client"<br/>}</pre></td></tr><tr><td>Obtain a token with invalid authorization code.</td><td>1. Use the <button aria-label="Copy Code"></button><code data-lang="" name="" tabindex="0"><span>/token</span></code> endpoint with an <strong>expired</strong> <button aria-label="Copy Code"></button><code data-lang="" name="" tabindex="0"><span>code</span></code>.<br/><br/>2. Use the <button aria-label="Copy Code"></button><code data-lang="" name="" tabindex="0"><span>/token</span></code> endpoint with an <strong>incorrect</strong> <button aria-label="Copy Code"></button><code data-lang="" name="" tabindex="0"><span>code</span></code>.</td><td>(both tasks) <button aria-label="Copy Code"></button><code data-lang="" name="" tabindex="0"><span>HTTP 400: Bad Request</span></code><br/><br/>Error payload:<br/><pre>{<br/>   "error": "invalid_request",<br/>   "error_description": "Invalid or expired code parameter."<br/>}</pre></td></tr><tr><td>Obtain a token with an <strong>incorrect</strong> <button aria-label="Copy Code"></button><code data-lang="" name="" tabindex="0"><span>redirect_URI</span></code>.</td><td>Use <button aria-label="Copy Code"></button><code data-lang="" name="" tabindex="0"><span>/token</span></code> endpoint with an <strong>incorrect</strong> <button aria-label="Copy Code"></button><code data-lang="" name="" tabindex="0"><span>redirect_URI</span></code>.</td><td><button aria-label="Copy Code"></button><code data-lang="" name="" tabindex="0"><span>HTTP 400: Bad Request</span></code><br/><br/>Error payload:<br/><pre>{<br/>   "error": "invalid_request",<br/>   "error_description": "redirect_uri did not match URI <br/> from initial request."<br/>}</pre></td></tr><tr><td>Obtain a token with a <strong>missing</strong> <button aria-label="Copy Code"></button><code data-lang="" name="" tabindex="0"><span>grant_type</span></code> field.</td><td>1. Use <button aria-label="Copy Code"></button><code data-lang="" name="" tabindex="0"><span>/token</span></code> endpoint with a <strong>missing</strong> <button aria-label="Copy Code"></button><code data-lang="" name="" tabindex="0"><span>grant_type</span></code> field. <br/><br/>2. Use <button aria-label="Copy Code"></button><code data-lang="" name="" tabindex="0"><span>/token</span></code> endpoint with an incorrect <button aria-label="Copy Code"></button><code data-lang="" name="" tabindex="0"><span>grant_type</span></code> field.</td><td><button aria-label="Copy Code"></button><code data-lang="" name="" tabindex="0"><span>HTTP 400: Bad Request</span></code><br/><br/>Error payload:<pre>{<br/>   "error": "invalid_grant"<br/>}</pre></td></tr><tr><td>Obtain a token with an incorrect <button aria-label="Copy Code"></button><code data-lang="" name="" tabindex="0"><span>client_id</span></code>.</td><td>1. Use <button aria-label="Copy Code"></button><code data-lang="" name="" tabindex="0"><span>/token</span></code> endpoint with an incorrect <button aria-label="Copy Code"></button><code data-lang="" name="" tabindex="0"><span>clientId</span></code>.<br/><br/>2. Use <button aria-label="Copy Code"></button><code data-lang="" name="" tabindex="0"><span>/token</span></code> endpoint with an incorrect <button aria-label="Copy Code"></button><code data-lang="" name="" tabindex="0"><span>client_secret</span></code>.</td><td>1. <button aria-label="Copy Code"></button><code data-lang="" name="" tabindex="0"><span>HTTP 401: invalid_client</span></code><br/><br/>2. <button aria-label="Copy Code"></button><code data-lang="" name="" tabindex="0"><span>HTTP 401 Unauthorized</span></code><br/><br/>Error payload:<br/><pre>{<br/>   "error": "invalid_client",<br/>   "error_description": "Invalid client credentials."<br/>}</pre></td></tr><tr><td>Refresh a token without a <button aria-label="Copy Code"></button><code data-lang="" name="" tabindex="0"><span>refresh_token</span></code>.</td><td>Use <button aria-label="Copy Code"></button><code data-lang="" name="" tabindex="0"><span>/token</span></code> endpoint with <button aria-label="Copy Code"></button><code data-lang="" name="" tabindex="0"><span>grant_type=refresh_token</span></code> without including the current <button aria-label="Copy Code"></button><code data-lang="" name="" tabindex="0"><span>refresh_token</span></code>.</td><td><button aria-label="Copy Code"></button><code data-lang="" name="" tabindex="0"><span>HTTP 400 Bad Request</span></code><br/><br/>Error payload:<br/><pre>{<br/>   "error": "invalid_request",<br/>   "error_description": "No refresh token in request."<br/>}</pre></td></tr></tbody></table></div></div></div><hr/></section><section></section></div><div id="tutorialmodal-root"></div></article></div></main><div id="ChatGPT-modal"></div></div></div><div></div></body>